{"version":3,"sources":["assets/icon.png","src/settings.tsx","src/UserContext.tsx","src/components/NavBar.tsx","src/components/Footer.tsx","src/pages/RunEvaluations.tsx","src/pages/Evaluation.tsx","src/pages/Collection.tsx","src/pages/CreateCollection.tsx","src/pages/Collections.tsx","src/pages/Assessments.tsx","src/pages/About.tsx","App.tsx","web-build/register-service-worker.js","webpack:////home/runner/work/fair-enough/fair-enough/frontend/src/App.css?391c","src/App.css"],"names":["module","exports","settings","apiUrl","restUrl","docsUrl","graphqlUrl","OauthRedirectUri","getUrlHtml","urlString","theme","useTheme","test","href","target","rel","style","color","palette","primary","main","textDecoration","UserContext","createContext","NavBar","classes","makeStyles","menuButton","common","white","linkButton","textTransform","linkLogo","alignItems","display","useStyles","useContext","user","setUser","React","useState","currentUsername","accessToken","loggedIn","state","setState","stateRef","useRef","useCallback","update","current","open","setOpen","anchorEl","setAnchorEl","useEffect","localStorageConfig","localStorage","getItem","configState","JSON","parse","axios","get","headers","then","res","data","error","AppBar","title","position","Toolbar","variant","to","className","Tooltip","src","iconImage","height","width","marginRight","alt","Button","spacing","username","onClick","event","currentTarget","prev","size","authorizationUrl","responseType","clientId","clientSecret","redirectUri","onSuccess","response","console","log","setItem","stringify","onFailure","component","Popper","ClickAwayListener","onClickAway","Paper","elevation","padding","textAlign","Typography","marginBottom","id","clear","Copyright","align","Footer","marginTop","backgroundColor","Container","maxWidth","Evaluation","history","useHistory","link","light","submitButton","margin","fullWidth","autocomplete","formInput","background","paperPadding","useLocation","urlToEvaluate","evaluationResults","adviceLogs","evaluationRunning","evaluationsList","collectionsList","collectionSelected","metadata_service_endpoint","use_datacite","updateState","length","map","collec","key","push","evaluation","handleTextFieldChange","value","columns","field","headerName","hide","flex","renderCell","params","startIcon","sort","sortModel","setSortModel","onSubmit","preventDefault","evaluateUrl","postJson","post","axiosRetry","retries","retryDelay","retryCount","retryCondition","status","evalId","doEvaluateUrl","Box","TextField","label","placeholder","onChange","InputProps","select","MenuItem","Grid","container","item","xs","FormControlLabel","control","Checkbox","checked","name","FormHelperText","type","CircularProgress","rows","components","GridToolbar","onSortModelChange","model","evalParams","useParams","logLevel","resourceMetadata","evalResults","results","logs","startsWith","Object","keys","metadata","includes","hljs","highlightAll","colorsLight","f","a","i","r","filterLog","getResultsForCategory","category","charCategory","substring","toLowerCase","filteredResults","filter","filterItem","fair_type","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","md","description","toUpperCase","metric_id","file_url","score","max_score","bonus_score","max_bonus","whiteSpace","overflowX","join","collection","resource_title","resource_description","sx","top","left","bottom","right","justifyContent","Divider","element","document","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","registerLanguage","json","Collection","collectionResults","assessmentsDict","assess","fairType","metricId","Chip","toString","currentUser","assessmentsList","addedAssessments","collectionId","collectionTitle","collectionDescription","collectionHomepage","collectionCreatedSnackbar","errorMessage","getBadgeFair","getBadgeRole","role","handleClose","reason","assessmentsInCollec","postCollec","catch","request","message","assessmentId","obj","cursor","addedAssess","b","IconButton","assessment","addedAssessment","disabled","Snackbar","anchorOrigin","vertical","horizontal","onClose","autoHideDuration","severity","Collections","Assessments","List","ListItem","ListItemAvatar","Avatar","ListItemText","python","secondary","paperTitle","fontWeight","mainText","About","dialogOpen","project_license","language_autocomplete","createTheme","blue","dark","typography","reducer","App","useReducer","ThemeProvider","Provider","basename","View","exact","path","CreateCollection","RunEvaluations","navigator","window","addEventListener","serviceWorker","register","scope","info","api","content","__esModule","default","options","locals","___CSS_LOADER_API_IMPORT___"],"mappings":"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","file":"static/js/app.ffd1ec95.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon.72626586.png\";","import React from \"react\";\nimport { useTheme } from '@mui/material/styles';\n\nconst settings = {\n  apiUrl: process.env.API_URL || 'http://localhost',\n  restUrl: ((process.env.API_URL) ? process.env.API_URL + '/rest' : null) || 'http://localhost/rest',\n  docsUrl: ((process.env.API_URL) ? process.env.API_URL + '/docs' : null) || 'http://localhost/docs',\n  graphqlUrl: ((process.env.API_URL) ? process.env.API_URL + '/graphql' : null) || 'http://localhost/graphql',\n  OauthRedirectUri: process.env.OAUTH_REDIRECT_FRONTEND || \"http://localhost:19006/collection/create\"\n}\n\nconst getUrlHtml = (urlString: string) => {\n  const theme = useTheme();\n  if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n    // Process URIs\n    return <a href={urlString}  target=\"_blank\" rel=\"noopener noreferrer\"\n        style={{color: theme.palette.primary.main,\n          textDecoration: 'none',\n          // '&:hover': {\n          //   color: theme.palette.primary.light,\n          //   textDecoration: 'none',}\n          }}>{urlString}</a>\n  } else {\n    return urlString\n  }\n}\n\n// export default settings;\nexport {\n  settings,\n  getUrlHtml\n}","import { createContext } from 'react';\n\nconst UserContext = createContext({});\nexport default UserContext;","import React, { useContext } from \"react\";\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles } from '@mui/styles';\nimport { Link } from \"react-router-dom\";\nimport { AppBar, Toolbar, Button, Tooltip, IconButton, Box, ButtonBase } from '@mui/material';\nimport { Popper, ClickAwayListener, Typography, Paper, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\nimport GitHubIcon from '@mui/icons-material/GitHub';\nimport InfoIcon from '@mui/icons-material/Info';\nimport ApiIcon from '@mui/icons-material/Http';\nimport GraphqlIcon from '@mui/icons-material/Code';\nimport LoginIcon from '@mui/icons-material/Login';\nimport CollectionsIcon from '@mui/icons-material/CollectionsBookmark';\nimport AssessmentsIcon from '@mui/icons-material/CollectionsBookmark';\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport axios from 'axios';\n\n// @ts-ignore\nimport iconImage from '../../assets/icon.png';\n\nimport { getUrlHtml, settings } from '../settings';\nimport { useAuth } from 'oidc-react';\nimport OAuth2Login from 'react-simple-oauth2-login';\nimport UserContext from '../UserContext'\n\n// const theme = useTheme();\n\n// const useStyles = makeStyles(() => ({\n//   menuButton: {\n//     // color: theme.palette.common.white\n//     color: '#fff'\n//   },\n//   linkButton: {\n//     textTransform: 'none',\n//     textDecoration: 'none',\n//     color: '#fff'\n//   },\n//   linkLogo: {\n//     // Seems to fit the 48px navbar height...\n//     // height: '48px',\n//     alignItems: 'center',\n//     display: 'flex',\n//   },\n// }))\n  \nexport default function NavBar() {\n  const theme = useTheme();\n  // const auth = useAuth();\n\n  const useStyles = makeStyles(() => ({\n    menuButton: {\n      color: theme.palette.common.white\n      // color: '#fff'\n    },\n    linkButton: {\n      textTransform: 'none',\n      textDecoration: 'none',\n      color: '#fff'\n    },\n    linkLogo: {\n      // Seems to fit the 48px navbar height...\n      // height: '48px',\n      alignItems: 'center',\n      display: 'flex',\n    },\n  }))\n  const classes = useStyles();\n\n  const { user, setUser }: any = useContext(UserContext)\n\n  const [state, setState] = React.useState({\n    currentUsername: null,\n    accessToken: null,\n    loggedIn: false\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n  // Settings for Popper\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl]: any = React.useState(null);\n  const showUserInfo = (event: any) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n    // setAnchorEl(anchorEl ? null : document.body);\n    setOpen((prev) => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n    setAnchorEl(anchorEl ? null : anchorEl);\n  };\n  const id = open ? 'simple-popper' : undefined;\n\n\n  const onSuccess = (response: any) => {\n    // console.log(response)\n    // const tokenRes: any = JSON.stringify(response)\n    // console.log('tokenRes')\n    // console.log(response['access_token'])\n    // console.log(response)\n\n    axios.get(settings.restUrl + '/current-user', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + response['access_token']\n      },\n    })\n      .then((res: any) => {\n        console.log('got current user')\n        let user = res.data\n        user['access_token'] = response['access_token']\n        console.log(user)\n        setUser(user)\n        localStorage.setItem(\"fairEnoughSettings\", JSON.stringify(user));\n        // window.location.reload();\n        // TODO: refactor to use Context without reload\n      })\n\n    // localStorage.setItem(\"fairEnoughSettings\", JSON.stringify(response));\n    // window.location.reload();\n  };\n  const onFailure = (response: any) => console.error(response);\n\n  const logout = () => {\n    localStorage.clear();\n    setUser({})\n    // window.location.reload();\n  }\n\n  React.useEffect(() => {\n    const localStorageConfig: any = localStorage.getItem(\"fairEnoughSettings\");\n    // console.log(localStorageConfig)\n    let configState: any = JSON.parse(localStorageConfig);\n    if (configState && configState['access_token']) {\n      axios.get(settings.restUrl + '/current-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + configState['access_token']\n        },\n      })\n        .then((res: any) => {\n          let user = res.data\n          if (!user.error) {\n            user['access_token'] = configState['access_token']\n            if (user['given_name'] || user['family_name']) {\n              user['username'] = configState['given_name'] + ' ' + configState['family_name']\n            } else if (user['name']) {\n              user['username'] = user['name']\n            }\n            setUser(user)\n          }\n          // https://stackoverflow.com/questions/25686484/what-is-intent-of-id-token-expiry-time-in-openid-connect\n          // If the token is expired, it should make another auth request, except this time with prompt=none in the URL parameter\n          // Getting an error with prompt if not login\n          \n          // localStorage.setItem(\"fairEnoughSettings\", JSON.stringify(user));\n          // window.location.reload();\n        })\n      // Also possible and lighter on the Auth API: just check the cookie\n      // const username = configState['given_name'] + ' ' + configState['family_name']\n      // updateState({ currentUsername: username, accessToken: configState['access_token'], loggedIn: true})\n      // console.log('access_token before setUser')\n      // console.log(configState)\n      // setUser({\n      //   username: username, \n      //   access_token: configState['access_token'],\n      //   id: configState['id'],\n      // })\n    }\n    // const { setSalad } = useContext(SaladContext)\n  // }, [user])\n  }, [])\n\n  // const localStorageConfig = localStorage.getItem(\"fairEnoughSettings\");\n  //     if (localStorageConfig) {\n  //       let configState: any = JSON.parse(localStorageConfig);\n  //       access_token = configState.access_token;\n  //     }\n\n\n  return (\n    <AppBar title=\"\" position='static'>\n      <Toolbar variant='dense'>\n        <Link to=\"/\" className={classes.linkLogo}>\n          <Tooltip title='☑️ FAIR Enough'>\n            <img src={iconImage} style={{height: '2em', width: '2em', marginRight: '10px'}} alt=\"Logo\" />\n          </Tooltip>\n        </Link>\n        <Link to=\"/\" className={classes.linkButton}>\n          <Tooltip title='Browse existing evaluations or submit a new one'>\n            <Button style={{color: '#fff'}}>\n              <EvaluationIcon />&nbsp;Evaluations\n            </Button>\n          </Tooltip>\n        </Link>\n        <Link to=\"/collections\" className={classes.linkButton}>\n          <Tooltip title='Browse existing Collections of assessments'>\n            <Button style={{color: '#fff'}}>\n              <CollectionsIcon />&nbsp;Collections\n            </Button>\n          </Tooltip>\n        </Link>\n        <Link to=\"/assessments\" className={classes.linkButton}>\n          <Tooltip title='Browse existing Assessments of assessments'>\n            <Button style={{color: '#fff'}}>\n              <AssessmentsIcon />&nbsp;Assessments\n            </Button>\n          </Tooltip>\n        </Link>\n        <div className=\"flexGrow\"></div>\n\n        <Tooltip title='Access the OpenAPI documentation of the API used by this website'>\n          <Button style={{color: '#fff'}} target=\"_blank\" rel=\"noopener noreferrer\"\n          href={settings.docsUrl}>\n            <ApiIcon style={{ marginRight: theme.spacing(1)}} />\n            API\n          </Button>\n        </Tooltip>\n        <Tooltip title='Access the GraphQL API'>\n          <Button style={{color: '#fff'}} target=\"_blank\" rel=\"noopener noreferrer\"\n          href={settings.graphqlUrl}>\n            {/* + '?query=query%20%7B%0A%20%20evaluations%20%7B%0A%20%20%20%20title%0A%20%20%20%20resourceUri%0A%20%20%20%20collection%0A%20%20%20%20score%20%7B%0A%20%20%20%20%20%20totalScore%0A%20%20%20%20%20%20totalScoreMax%0A%20%20%20%20%20%20percent%0A%20%20%20%20%20%20totalBonus%0A%20%20%20%20%20%20totalBonusMax%0A%20%20%20%20%20%20bonusPercent%0A%20%20%20%20%7D%0A%20%20%20%20results%20%7B%0A%20%20%20%20%20%20title%0A%20%20%20%20%20%20fairType%0A%20%20%20%20%20%20metricId%0A%20%20%20%20%20%20score%0A%20%20%20%20%20%20maxScore%0A%20%20%20%20%20%20bonusScore%0A%20%20%20%20%20%20maxBonus%0A%20%20%20%20%20%20logs%0A%20%20%20%20%7D%0A%20%20%20%20data%0A%20%20%7D%0A%7D' */}\n            <GraphqlIcon style={{ marginRight: theme.spacing(1)}} />\n            GraphQL\n          </Button>\n        </Tooltip>\n        <Link to=\"/about\" className={classes.linkButton}>\n          <Tooltip title='About'>\n            <Button style={{color: '#fff'}}>\n              <InfoIcon />\n            </Button>\n          </Tooltip>\n        </Link>\n        <Tooltip title='Source code'>\n          <Button style={{color: '#fff'}} target=\"_blank\"\n          href=\"https://github.com/MaastrichtU-IDS/fair-enough\">\n            <GitHubIcon />\n          </Button>\n        </Tooltip>\n\n        {/* <Tooltip title='Login with ORCID'> */}\n        {/* <Button variant='contained' color='primary' size='small' component=\"span\"> */}\n        {/* {} */}\n        { user.username && \n            <Button variant='contained' onClick={showUserInfo} color='secondary' size='small'>\n              {user.username}\n            </Button>\n        }\n        { !user.username && \n          <OAuth2Login\n            className=\"MuiButton‑root MuiButton‑contained\"\n            authorizationUrl=\"https://orcid.org/oauth/authorize\"\n            responseType=\"token\"\n            clientId={process.env.ORCID_CLIENT_ID}\n            clientSecret={process.env.ORCID_CLIENT_SECRET}\n            redirectUri={settings.OauthRedirectUri}\n            // redirectUri=\"\"\n            style={{textTransform: 'none', textDecoration: 'none'}}\n            onSuccess={onSuccess}\n            onFailure={onFailure}>\n              <Button variant='contained' color='primary' size='small' component=\"span\">\n                Login with ORCID\n              </Button>\n          </OAuth2Login>\n          }\n        <Popper open={open} anchorEl={anchorEl}>\n            <ClickAwayListener onClickAway={handleClickAway}>\n              <Paper elevation={4} style={{padding: theme.spacing(2, 2), textAlign: 'left'}}>\n                <Typography style={{marginBottom: theme.spacing(1)}}>\n                  Logged in with ORCID: {getUrlHtml(user.id)}\n                </Typography>\n                <Typography style={{marginBottom: theme.spacing(1)}}>\n                  Username: {user.username}\n                </Typography>\n                <Button onClick={logout} variant='contained' size='small'>\n                  Logout\n                </Button>\n              </Paper>\n            </ClickAwayListener>\n          </Popper>    \n        {/* </Button> */}\n        {/* </Tooltip> */}\n\n        {/* <Tooltip title='Login with ORCID'>\n          <Button href=\"http://localhost/rest/login\" style={{color: '#fff'}} >\n            <LoginIcon />\n          </Button>\n        </Tooltip> */}\n        {/* <Tooltip title='Login with ORCID'>\n          <Button onClick={() => {auth.signIn()}} style={{color: '#fff'}} >\n            <LoginIcon />\n          </Button>\n        </Tooltip> */}\n\n      </Toolbar>\n    </AppBar>\n  );\n}","import React from 'react';\nimport { useTheme } from '@mui/material/styles';\n// import { makeStyles } from '@mui/styles';\nimport { Container, Typography } from '@mui/material';\n\nfunction Copyright() {\n  // const classes = useStyles();\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <a style={{textDecoration: 'none', color: 'inherit'}} target=\"_blank\"\n      href=\"https://maastrichtuniversity.nl/ids\">\n        Institute of Data Science at Maastricht University\n      </a>{' '}\n      {'2020.'}\n    </Typography>\n  );\n}\n\nexport default function Footer() {\n  // const classes = useStyles();\n  const theme = useTheme()\n\n  // const useStyles = makeStyles((theme) => ({\n  //   darkLink: {\n  //     textDecoration: 'none',\n  //     color: 'inherit',\n  //     '&:hover': {\n  //       color: theme.palette.primary.light,\n  //       textDecoration: 'none',\n  //     },\n  //   },\n  //   whiteLink: {\n  //     textDecoration: 'none',\n  //     color: 'inherit',\n  //     '&:hover': {\n  //       color: theme.palette.primary.dark,\n  //       textDecoration: 'none',\n  //     },\n  //   },\n  //   footer: {\n  //     padding: theme.spacing(2),\n  //     marginTop: 'auto',\n  //     color: 'white',\n  //     backgroundColor: theme.palette.primary.main,\n  //   },\n  // }));\n\n  // Set state in functional style:\n  // const [state, setState] = React.useState({search: '', name: 'Vincent'});\n  // console.log(state.search);\n  // // Set search without chaging name\n  // setState({...state, search: 'yo'})\n  // const onNameChange = React.useCallback((filterName) => {\n  //   console.log('callback', state.name);\n  // },\n  // [state.name]);\n  // // Tells callback to reload when change to state.name\n\n  // React.useEffect(() => {\n  //   console.log('componentDID mount');\n  //   return () => {\n  //     console.log('willMount');\n  //   }\n  // }, []) \n  // Empty dep list: will only run when componentDidMount\n\n  return (\n      <footer style={{padding: theme.spacing(2),\n          marginTop: 'auto',\n          color: 'white',\n          backgroundColor: theme.palette.primary.main }}>\n        <Container maxWidth=\"md\" style={{textAlign: 'center'}}>\n          <Typography variant=\"body2\" >\n            This website is licensed under the&nbsp;\n            <a target=\"_blank\" style={{textDecoration: 'none', color: 'inherit'}}\n            href=\"https://github.com/MaastrichtU-IDS/fair-enough/blob/main/LICENSE\">\n              MIT license\n            </a>\n            {/* <img src={require('../assets/images/mit_license.png')} /> */}\n          </Typography>\n          <Copyright />\n        </Container>\n      </footer>\n  );\n}","import React, { useContext } from 'react';\nimport { useLocation, useHistory, Link } from \"react-router-dom\";\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, Paper, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport { Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\n// import EvaluationIcon from '@mui/icons-material/Send';\n// import EvaluationIcon from '@mui/icons-material/PlaylistAddCheck';\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport UserContext from '../UserContext';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams, GridSortModel } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { settings } from '../settings'\n// import { useAuth } from 'oidc-react';\n\nexport default function Evaluation() {\n  const theme = useTheme();\n  const history = useHistory();\n  // const auth = useAuth();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n  const classes = useStyles();\n\n  const { user }: any = useContext(UserContext);\n\n  // useLocation hook to get URL params\n  let location = useLocation();  \n  let evaluationResults: any = null;\n  let resourceMetadata: any = null;\n  let fairDoughnutConfig: any = null;\n  const [state, setState] = React.useState({\n    urlToEvaluate: \"https://doi.org/10.1594/PANGAEA.908011\",\n    // urlToEvaluate: \"https://doi.org/10.1038/sdata.2016.18\",\n    evaluationResults: evaluationResults,\n    adviceLogs: [],\n    evaluationRunning: false,\n    evaluationsList: [],\n    collectionsList: [],\n    collectionSelected: 'fair-metrics',\n    metadata_service_endpoint: 'https://ws.pangaea.de/oai/provider',\n    use_datacite: true,\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n  // Settings for Popper\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl]: any = React.useState(null);\n  const handleClick = (event: any) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n    // setAnchorEl(anchorEl ? null : document.body);\n    setOpen((prev) => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n    setAnchorEl(anchorEl ? null : anchorEl);\n  };\n  const id = open ? 'simple-popper' : undefined;\n  \n\n  // Run on page init\n  React.useEffect(() => {\n    // Get the edit URL param if provided\n    // const params = new URLSearchParams(location.search + location.hash);\n    // let urlToEvaluate = params.get('evaluate');\n    // if (urlToEvaluate) {\n    //   updateState({ urlToEvaluate: urlToEvaluate })\n    //   doEvaluateUrl(urlToEvaluate)\n    // }\n    if (state.collectionsList.length < 1) {\n      axios.get(settings.restUrl + '/collections', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          let collectionsList: any = []\n          res.data.map((collec: any, key: number) => {\n            collec['id'] = collec['_id']\n            collectionsList.push(collec)\n          })\n          updateState({ collectionsList: collectionsList })\n        })\n    }\n\n    // Get the list of evaluations from API\n    if (state.evaluationsList.length < 1) {\n      axios.get(settings.restUrl + '/evaluations', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          let evaluationsList: any = []\n          res.data.map((evaluation: any, key: number) => {\n            evaluation['id'] = evaluation['_id']\n            evaluation['score_percent'] = evaluation['score']['percent']\n            evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n            evaluationsList.push(evaluation)\n          })\n          updateState({ evaluationsList: evaluationsList })\n\n        })\n    }\n  }, [])\n\n  const colors: any = {\n    f: '#81d4fa', // blue\n    a: '#ffcc80', // orange\n    i: '#a5d6a7', // green\n    r: '#b39ddb', // purple\n    fail: '#ef5350' // red\n  }\n  const colorsLight: any = {\n    f: '#b3e5fc', // blue\n    a: '#ffe0b2', // orange\n    i: '#c8e6c9', // green\n    r: '#d1c4e9', // purple\n  }\n\n  const getUrlHtml = (urlString: string) => {\n    if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n      // Process URIs\n      return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n    } else {\n      return urlString\n    }\n  }\n\n  const doEvaluateUrl  = (evaluateUrl: string) => {\n    updateState({\n      evaluationRunning: true,\n      evaluationResults: null\n    })\n    console.log('Starting evaluation of ' + evaluateUrl + ' with API ' + settings.docsUrl)\n    const postJson: any = {\n      \"resource_uri\": evaluateUrl,\n      // \"title\": \"FAIR metrics dataset evaluation\",\n      \"collection\": state.collectionSelected\n    };\n    console.log(user)\n    // Getting User access_token from context set by NavBar\n    let headers: any = {'Content-Type': 'application/json'}\n    if (user && user['access_token']) {\n      headers['Authorization'] = 'Bearer ' + user['access_token']\n    }\n    axios.post(settings.restUrl + '/evaluations', JSON.stringify(postJson), \n      { headers: headers }\n    )\n      .then(res => {\n        axiosRetry(axios, {\n          retries: 30, // number of retries\n          retryDelay: (retryCount) => {\n            console.log(`Waiting for evaluation to finish: ${retryCount}`);\n            return retryCount * 3000; // time interval between retries\n          },\n          retryCondition: (error: any) => {\n            // if retry condition is not specified, by default idempotent requests are retried\n            return error.response.status === 404;\n          },\n        });\n\n        const evalId = res.data['_id']\n        // Retry every 3 seconds until the evaluation is available\n        axios.get(settings.restUrl + '/evaluations/' + evalId)\n          .then((res: any) => {\n            // Redirect to the page of the created evaluation\n            history.push(\"/evaluation/\" + evalId);\n          })\n      })\n  }\n\n  const handleTextFieldChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    // Set the TextField input to the state variable corresponding to the field id  \n    console.log('user from context')\n    console.log(user)\n    updateState({[event.target.id]: event.target.value})\n  }\n  const handleSubmit  = (event: React.FormEvent) => {\n    event.preventDefault();\n    doEvaluateUrl(state.urlToEvaluate)\n  }\n\n  // const BorderLinearProgress = withStyles({\n  //   root: {\n  //     height: 20,\n  //     width: \"100%\",\n  //     // backgroundColor: hex ? lighten(internalColor, 0.5) : undefined,\n  //     borderRadius: \"10px\"\n  //   },\n  //   bar: {\n  //     borderRadius: 20,\n  //     // backgroundColor: hex ? internalColor : undefined\n  //   }\n  // })(LinearProgress);\n\n  const handleCollectionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    updateState({'collectionSelected': event.target.value})\n    // hljs.highlightAll();\n  }\n\n  const columns: GridColumns = [\n    { field: '@id', headerName: 'ID', hide: true },\n    { \n      field: 'id', headerName: 'Access evaluation', flex: 0.5,\n      renderCell: (params: GridRenderCellParams) => (\n        <Link to={'/evaluation/' + params.value as string}>\n          <Button variant=\"contained\" \n              className={classes.submitButton} \n              startIcon={<EvaluationIcon />}\n              color=\"primary\">\n            Evaluation\n          </Button>\n        </Link>)\n    },\n    // { field: 'title', headerName: 'Title', flex: 1 },\n    {\n      field: 'resource_uri', headerName: 'Resource URI', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    },\n    {\n      field: 'collection', headerName: 'Collection', flex: 0.4,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          <Link to={'/collection/' + params.value as string} style={{textDecoration: 'none', color: theme.palette.primary.main}}>\n            {params.value as string}\n          </Link>\n        </>)\n    },\n    {\n      field: 'score_percent', headerName: 'FAIR score', flex: 0.3,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}%\n        </>)\n    },\n    {\n      field: 'bonus_percent', headerName: 'Bonus score', flex: 0.3,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}%\n        </>)\n    },\n    {\n      field: 'created', headerName: 'Date created', flex: 0.3,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}\n        </>)\n    },\n    {\n      field: 'author', headerName: 'Author', flex: 0.6,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    }\n  ]\n  \n  const [sortModel, setSortModel] = React.useState<GridSortModel>([\n    {\n      field: 'created',\n      sort: 'desc',\n    },\n  ]);\n\n  return(\n    <Container className='mainContainer'>\n      <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n        ⚖️ Evaluate how FAIR is a resource 🔗\n      </Typography>\n\n      {/* {auth && auth.userData &&\n        <div>\n          <strong>Logged in! 🎉</strong><br />\n          <button onClick={() => auth.signOut()}>Log out!</button>\n        </div>\n      } */}\n\n      {/* Form to provide the URL to evaludate */}\n      <form onSubmit={handleSubmit}>\n        <Box display=\"flex\" style={{margin: theme.spacing(0, 6)}}>\n          <TextField\n            id='urlToEvaluate'\n            label='URL of the resource to evaluate'\n            placeholder='URL of the resource to evaluate'\n            value={state.urlToEvaluate}\n            className={classes.fullWidth}\n            variant=\"outlined\"\n            onChange={handleTextFieldChange}\n            // size='small'\n            InputProps={{\n              className: classes.formInput\n            }}\n          />\n          {/* Log level dropdown select */}\n          <TextField select\n              value={state.collectionSelected} \n              label={\"Using the collection\"} \n              id=\"collectionSelected\" \n              onChange={handleCollectionChange} \n              style={{margin: theme.spacing(0, 2), backgroundColor: 'white'}}\n              variant=\"outlined\"> \n            { state.collectionsList.map((collec: any, key: number) => (\n              <MenuItem value={collec.id}>{collec.title} ({collec.id})</MenuItem>\n            ))}\n          </TextField>\n\n          {/* <Tooltip  title='Evaluator settings'>\n            <Button style={{margin: theme.spacing(1)}} onClick={handleClick}>\n              <SettingsIcon />\n            </Button>\n          </Tooltip> */}\n          <Popper open={open} anchorEl={anchorEl}>\n            <ClickAwayListener onClickAway={handleClickAway}>\n              <Paper elevation={4} className={classes.paperPadding} style={{textAlign: 'center'}}>\n                {/* <Typography variant=\"h6\" style={{textAlign: 'center'}}>\n                  Evaluator settings\n                </Typography> */}\n                <Grid container spacing={1}>\n                  <Grid item xs={12}>\n                    <Tooltip title='By default, the FAIR Enough evaluator uses content negociation based on the DOI URL to retrieve DataCite JSON metadata. If you uncheck this option F-UJI will try to use the landing page URL instead.'>\n                      <FormControlLabel\n                        control={\n                          <Checkbox\n                            checked={state.use_datacite}\n                            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                              updateState({[event.target.name]: event.target.checked});\n                            }}\n                            name=\"use_datacite\"\n                            color=\"primary\"\n                          />\n                        }\n                        label=\"Use DataCite\"\n                      />\n                    </Tooltip>\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Tooltip title='OAI-PMH (Open Archives Initiative Protocol for Metadata Harvesting) endpoint to use when searching for metadata about this resource.'>\n                      <TextField\n                        id='metadata_service_endpoint'\n                        label='OAI-PMH metadata endpoint URL'\n                        placeholder='OAI-PMH metadata endpoint URL'\n                        value={state.metadata_service_endpoint}\n                        className={classes.fullWidth}\n                        variant=\"outlined\"\n                        onChange={handleTextFieldChange}\n                        // size='small'\n                        InputProps={{\n                          className: classes.formInput\n                        }}\n                      />\n                    </Tooltip>\n                    <FormHelperText>List of OAI-PMH providers: {getUrlHtml('https://www.openarchives.org/Register/BrowseSites')}</FormHelperText>\n                  </Grid>\n                </Grid>\n              </Paper>\n            </ClickAwayListener>\n          </Popper>\n        </Box>\n\n        <Button type=\"submit\" \n          variant=\"contained\" \n          // className={classes.submitButton} \n          style={{marginTop: theme.spacing(2), marginBottom: theme.spacing(4)}}\n          startIcon={<EvaluationIcon />}\n          color=\"secondary\" >\n            Start the evaluation\n        </Button>\n      </form>\n\n      {state.evaluationRunning && \n        <CircularProgress style={{margin: theme.spacing(5, 0)}} />\n      }\n\n      {/* Display the Data table listing the Evaluations */}\n      {state.evaluationsList.length > 0 && \n        <div style={{ height: 600, width: '100%' }}>\n          {console.log(state.evaluationsList)}\n          <DataGrid\n            columns={columns}\n            rows={state.evaluationsList}\n            // {...state.evaluationsList}\n            components={{\n              Toolbar: GridToolbar,\n            }}\n            sortModel={sortModel}\n            onSortModelChange={(model) => setSortModel(model)}\n            style={{backgroundColor: '#fff'}}\n          />\n        </div>\n      }\n    </Container>\n  )\n}\n\n","import React from 'react';\nimport { useLocation, useParams, Link } from \"react-router-dom\";\n// import { useParams } from 'react-router';\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\n// import { makeStyles, useTheme, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, Paper, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport { LinearProgress, Accordion, AccordionSummary, AccordionDetails, Divider, Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport DownloadJsonIcon from '@mui/icons-material/GetApp';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport PassIcon from '@mui/icons-material/CheckCircle';\nimport FailIcon from '@mui/icons-material/Error';\n// import EvaluationIcon from '@mui/icons-material/Send';\n// import EvaluationIcon from '@mui/icons-material/PlaylistAddCheck';\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport HelpIcon from '@mui/icons-material/Help';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\n\nimport {settings} from '../settings'\n\nimport hljs from 'highlight.js/lib/core';\n// // import hljs from 'highlight.js'; // Too heavy, loading only required languages\nimport 'highlight.js/styles/github-dark-dimmed.css';\nimport json from 'highlight.js/lib/languages/json';\n// import turtle from 'highlightjs-turtle';\n// var hljsDefineTurtle = require('highlightjs-turtle');\nhljs.registerLanguage('json', json);\n// hljs.registerLanguage('turtle', turtle);\n\n\nexport default function Evaluation() {\n  const theme = useTheme();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n\n  const classes = useStyles(theme);\n  // const { id } = useParams();\n  const evalParams: any = useParams();\n  // useLocation hook to get URL params\n  let location = useLocation();  \n  let evaluationResults: any = null;\n  let resourceMetadata: any = null;\n  const [state, setState] = React.useState({\n    evaluationResults: evaluationResults,\n    adviceLogs: [],\n    logLevel: 'success',\n    resourceMetadata: resourceMetadata,\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n\n  // Run on page init\n  React.useEffect(() => {\n    // get evaluations\n    axios.get(settings.restUrl + '/evaluations/' + evalParams.id, {\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then((res: any) => {\n        const evalResults = res.data;\n        updateState({ evaluationResults: evalResults })\n\n        let adviceLogs: any = []\n        evalResults.results.map((evaluation: any, key: number) => {\n          evaluation.logs.map((log: any, key: number) => {\n            if (log.startsWith('❌') || log.startsWith('ℹ️')) {\n              adviceLogs.push(log);\n            }\n          })\n        })\n        updateState({adviceLogs: adviceLogs})\n\n        // Check for metadata found in output (core metadata, license)\n        let resourceMetadata: any = {}\n        Object.keys(evalResults.data).map((metadata: any, key: number) => {\n        // evaluationResults.data.map((item: any, key: number) => {\n          const extractMetadata = ['resource_title', 'resource_description', 'date_created', 'accessRights', 'license']\n          if (extractMetadata.includes(metadata)) {\n            resourceMetadata[metadata] = evalResults.data[metadata]\n          }\n          // if (item.output.core_metadata_found) {\n          //   resourceMetadata = {...resourceMetadata, ...item.output.core_metadata_found}\n          // }\n          // if (Array.isArray(item.output)) {\n          //   item.output.map((outputEntry: any, key: number) => {\n          //     if (outputEntry.license) {\n          //       resourceMetadata = {...resourceMetadata, ...{license: outputEntry.license}}  \n          //     }\n          //   })\n          // }\n        })\n        updateState({resourceMetadata: resourceMetadata})\n        hljs.highlightAll();\n      })\n\n  }, [])\n\n  const colors: any = {\n    f: '#81d4fa', // blue\n    a: '#ffcc80', // orange\n    i: '#a5d6a7', // green\n    r: '#b39ddb', // purple\n    fail: '#ef5350' // red\n  }\n  const colorsLight: any = {\n    f: '#b3e5fc', // blue\n    a: '#ffe0b2', // orange\n    i: '#c8e6c9', // green\n    r: '#d1c4e9', // purple\n  }\n\n  const getUrlHtml = (urlString: string) => {\n    if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n      // Process URIs\n      return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n    } else {\n      return urlString\n    }\n  }\n\n  // const handleTextFieldChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  //   // Set the TextField input to the state variable corresponding to the field id  \n  //   updateState({[event.target.id]: event.target.value})\n  // }\n\n  const handleLogLevelChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    updateState({'logLevel': event.target.value})\n    // hljs.highlightAll();\n  }\n  const downloadEvaluation  = (event: React.FormEvent) => {\n    event.preventDefault();\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(state.evaluationResults, null, 4)));\n    element.setAttribute('download', 'evaluation.json');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  const filterLog = (log: string) => {\n    if (state.logLevel == 'all') {\n      return true\n    } else if (state.logLevel == 'success') {\n      return (log.startsWith('✅') || log.startsWith('🚀') || log.startsWith('❌') || log.startsWith('ℹ️'))\n    } else if (state.logLevel == 'warning') {\n      return (log.startsWith('❌') || log.startsWith('⚠️') || log.startsWith('ℹ️'))\n    } else if (state.logLevel == 'error') {\n      return (log.startsWith('❌') || log.startsWith('ℹ️'))\n    }\n  }\n\n  const getBadgeTestStatus  = (status: string) => {\n    if (status == 'pass') {\n      return <PassIcon color='secondary' fontSize='large'/>\n    } else if (status == 'fail') {\n      return <FailIcon style={{color: colors.fail}} fontSize='large'/>\n    }\n    return <Chip label={status} color='primary'/>\n  }\n  const getBadgeMaturity  = (maturity: number) => {\n    if (maturity == 3) {\n      return <Chip label={maturity + '/3'} color='primary'/> // blue\n    } else if (maturity == 2) {\n      return <Chip label={maturity + '/3'} style={{backgroundColor: colors.r}}/> // purple\n    } else if (maturity == 1) {\n      return <Chip label={maturity + '/3'} style={{backgroundColor: colors.a}}/> // orange\n    } else if (maturity == 0) {\n      return <Chip label={maturity + '/3'} style={{backgroundColor: colors.fail}}/> // red\n    }\n    return <Chip label={maturity + '/3'}/>\n  }\n\n  const columns: GridColumns = [\n    { field: '@id', headerName: 'ID', hide: true },\n    { \n      field: 'id', headerName: 'Evaluation ID', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <Button href={'/evaluation/' + params.value as string}\n            variant=\"contained\" \n            className={classes.submitButton} \n            startIcon={<EvaluationIcon />}\n            color=\"primary\">\n          Evaluation\n        </Button>)\n    },\n    { field: 'title', headerName: 'Title', flex: 1 },\n    {\n      field: 'resource_uri', headerName: 'Resource URI', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    },\n    {\n      field: 'score_percent', headerName: 'Score', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}%\n        </>)\n    },\n    {\n      field: 'bonus_percent', headerName: 'Bonus', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}%\n        </>)\n    }\n  ]\n  \n\n  const getResultsForCategory  = (category: string) => {\n    const emojiMap: any = {\n      'f': '🔍️',\n      'a': '📬️',\n      'i': '⚙️',\n      'r': '♻️'\n    }\n    const charCategory = category.substring(0, 1).toLowerCase();\n    // const fairScore = state.evaluationResults['score']['percent'][charCategory]\n    // console.log(state.evaluationResults.results);\n    // console.log(category);\n    // console.log(charCategory);\n\n    const filteredResults = state.evaluationResults.results\n      .filter((item: any) => {\n        let filterItem = false\n        if (item.fair_type.startsWith(charCategory)) {\n          // Don't show the test if all logs are filtered out\n          item.logs.map((log: string, key: number) => {\n            if (filterLog(log) == true) {\n              filterItem = true\n            }\n          })\n        }\n        return filterItem\n      })\n\n    // return <Accordion key={category} defaultExpanded={fairScore < 100}\n    return <>\n    {filteredResults.length > 0 &&\n      <Accordion defaultExpanded={true}\n        // <Accordion key={category} defaultExpanded={true}\n          style={{backgroundColor: colorsLight[charCategory]}}>\n        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n          <Typography variant=\"h4\">\n            {emojiMap[charCategory]} {category}\n          </Typography>\n        </AccordionSummary>\n        <AccordionDetails>\n          <Grid container spacing={1} style={{textAlign: 'left'}}>\n          {\n            // Iterate over the evaluation results to show the different metrics tests, output and debug log\n            filteredResults.map((item: any, key: number) => (\n                <Grid item xs={12} md={12} key={key}>\n                  <Accordion defaultExpanded={true}>\n                    <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                      {/* {getBadgeTestStatus(item.test_status)}&nbsp;\n                      {getBadgeMaturity(item.maturity)}&nbsp; */}\n                      <Typography variant=\"h6\">\n                        {item.title}\n                      </Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <Grid container spacing={1} style={{textAlign: 'left'}}>\n                        <Grid item xs={12} md={12}>\n                          <>\n                            <Typography variant=\"body1\">\n                              {item.description}\n                            </Typography>\n                            <Typography variant=\"body1\">\n                              Metric: {item.fair_type.toUpperCase()}{item.metric_id}\n                            </Typography>\n                            <Typography variant=\"body1\">\n                              Assessment URL: {getUrlHtml(item.file_url)}\n                            </Typography>\n                            <Typography variant=\"body1\">\n                              FAIR score: {item.score}/{item.max_score} | Bonus score: {item.bonus_score}/{item.max_bonus}\n                            </Typography>\n                          </>\n                        </Grid>\n\n                        <Grid item xs={12} md={12}>\n                          {/* {state.adviceLogs.join(\"\\n\").length > 0 && */}\n                          <pre>\n                            <code className=\"language-pythonlogging\" style={{whiteSpace: 'pre-wrap', overflowX: 'auto'}}>\n                              {item.logs.filter((log: string) => {\n                                return filterLog(log)\n                              }).join(\"\\n\")}\n                            </code>\n                          </pre>\n                        </Grid>\n                      </Grid>\n                    </AccordionDetails>\n                  </Accordion>\n                </Grid>\n              ))\n          }\n          </Grid>\n        </AccordionDetails>\n      </Accordion>\n    }\n    </>\n  }\n\n  return(\n    <Container className='mainContainer'>\n\n      {state.evaluationResults &&\n        // Display results from the JSON from the API\n        <>\n          <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n            {getUrlHtml(state.evaluationResults['resource_uri'])}\n          </Typography>\n          {state.evaluationResults['created'] &&\n            <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(3)}}>\n              Evaluated with the <Link to={'/collection/' + state.evaluationResults.collection} style={{color: theme.palette.primary.main, textDecoration: 'none'}}>{state.evaluationResults.collection}</Link> collection on the {state.evaluationResults['created']}\n            </Typography>\n          }\n          {state.evaluationResults['author'] &&\n            <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(3)}}>\n              By {getUrlHtml(state.evaluationResults['author'])}\n            </Typography>\n          }\n          {state.resourceMetadata &&\n            // Display resources metadata if found\n            <>\n              {/* <Typography variant=\"h4\" style={{margin: theme.spacing(3, 0), textAlign: 'center'}}>\n                Metadata found\n              </Typography> */}\n              <Paper className={classes.paperPadding} style={{textAlign: 'left'}}>\n                {state.resourceMetadata.resource_title &&\n                  <Typography variant=\"h5\" style={{marginBottom: theme.spacing(1)}}>\n                    title: {state.resourceMetadata.resource_title}\n                  </Typography>\n                }\n                {state.resourceMetadata.resource_description &&\n                  <Typography variant=\"body1\" style={{marginBottom: theme.spacing(1)}}>\n                    summary: {state.resourceMetadata.resource_description}\n                  </Typography>\n                }\n                {\n                  Object.keys(state.resourceMetadata).map((metadata: any, key: number) => {\n                    if (!['resource_title', 'resource_description'].includes(metadata)) {\n                      return <Typography variant=\"body1\" style={{marginBottom: theme.spacing(1)}} key={key}>\n                          {metadata}: {getUrlHtml(state.resourceMetadata[metadata])}\n                        </Typography>\n                    }\n                  })\n                }\n              </Paper>\n            </>\n          }\n\n          {/* <Typography variant=\"h4\" style={{margin: theme.spacing(3, 0)}}>\n            FAIR score: {state.evaluationResults['score']['percent']} ({state.evaluationResults['score']['total_score']}/{state.evaluationResults['score']['total_score_max']})\n          </Typography> */}\n\n          <Grid container spacing={1}>\n            <Grid item xs={3} md={3}></Grid>\n            <Grid item xs={3} md={3}>\n              <Typography variant=\"h5\" style={{margin: theme.spacing(3, 0)}}>\n                FAIR score: {state.evaluationResults['score']['total_score']}/{state.evaluationResults['score']['total_score_max']}\n              </Typography>\n              <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n                <CircularProgress variant=\"determinate\" value={state.evaluationResults['score']['percent']}/>\n                {/* <CircularProgress variant=\"determinate\" value={60} size='50%'/> */}\n                <Box\n                  sx={{\n                    top: 0, left: 0, bottom: 0, right: 0,\n                    position: 'absolute',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <Typography variant=\"caption\" component=\"div\">\n                    {`${state.evaluationResults['score']['percent']}%`}<br/>\n                  </Typography>\n                </Box>\n              </Box>\n            </Grid>\n\n            <Grid item xs={3} md={3}>\n              <Typography variant=\"h5\" style={{margin: theme.spacing(3, 0)}}>\n                Bonus score: {state.evaluationResults['score']['total_bonus']}/{state.evaluationResults['score']['total_bonus_max']}\n              </Typography>\n              <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n                <CircularProgress variant=\"determinate\" value={state.evaluationResults['score']['bonus_percent']}/>\n                <Box\n                  sx={{\n                    top: 0, left: 0, bottom: 0, right: 0,\n                    position: 'absolute',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <Typography variant=\"caption\" component=\"div\">\n                    {`${state.evaluationResults['score']['bonus_percent']}%`}<br/>\n                  </Typography>\n                </Box>\n              </Box>\n            </Grid>\n          </Grid>\n\n          {/* Log level dropdown select */}\n          <Box style={{alignItems: 'center'}}>\n            <TextField select\n                value={state.logLevel} \n                label={\"Log level\"} \n                id=\"logLevel\" \n                style={{backgroundColor: 'white', marginRight: theme.spacing(2)}}\n                onChange={handleLogLevelChange} \n                variant=\"outlined\"> \n              <MenuItem key='success' value={'success'}>Success and failures</MenuItem>\n              <MenuItem key='error' value={'error'}>Failures only</MenuItem>\n              <MenuItem key='warning' value={'warning'}>Additional warnings</MenuItem>\n              <MenuItem key='all' value={'all'}>All logs</MenuItem>\n            </TextField>\n            <Tooltip\n              title={<Typography>✅ Indicates a successful test, +1 to the FAIR score<br/>\n                  🚀 Indicates a successful non-mandatory test, +1 to the bonus score<br/>\n                  ❌ Indicates a failed test<br/>\n                  ⚠️ Indicates a warning from a test<br/>\n                  🔎 Gives informations on the test performed<br/>\n                </Typography>}>\n              <HelpIcon />\n            </Tooltip>\n          </Box>\n\n          {/* Display results per category */}\n          {getResultsForCategory('Findable')}\n          {getResultsForCategory('Accessible')}\n          {getResultsForCategory('Interoperable')}\n          {getResultsForCategory('Reusable')}\n            \n          { state.evaluationResults &&\n          <>\n            <Divider variant=\"middle\" style={{margin: theme.spacing(6, 0)}}/>\n            <Accordion defaultExpanded={true}>\n              {/* // <Accordion key={category} defaultExpanded={true}\n              // style={{backgroundColor: colorsLight[charCategory]}}> */}\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"h4\">\n                  📋️ Evaluation output\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails style={{textAlign: 'left'}}>\n                <Typography>\n                  All metadata found:\n                </Typography>\n                <pre>\n                  <code className=\"language-json\" style={{whiteSpace: 'pre-wrap', overflowX: 'auto'}}>\n                    {JSON.stringify(state.evaluationResults.data, null, 2)}\n                  </code>\n                </pre>\n                <Typography>\n                  Main RDF metadata retrieved:\n                </Typography>\n                <pre>\n                  <code className=\"language-json\" style={{whiteSpace: 'pre-wrap', overflowX: 'auto'}}>\n                    {state.evaluationResults.data['main_rdf_metadata']}\n                  </code>\n                </pre>\n              </AccordionDetails>\n            </Accordion>\n          </>}\n          \n          <Button\n            variant=\"contained\" \n            style={{textTransform: 'none', margin: theme.spacing(2, 2)}}\n            onClick={downloadEvaluation}\n            startIcon={<DownloadJsonIcon />}>\n              Download the evaluation results JSON file\n          </Button>\n\n\n        </>\n      }\n\n    </Container>\n  )\n}\n\n\n// Custom codeblocks highlight \n// import hljs from 'highlight.js/lib/core';\n// // import hljs from 'highlight.js'; // Too heavy, loading only required languages\n// import 'highlight.js/styles/github-dark-dimmed.css';\n// import json from 'highlight.js/lib/languages/json';\n// hljs.registerLanguage('json', json);\n// hljs.registerLanguage(\"pythonlogging\",function(e){return {\n//   // Define codeblock highlight for API tests logs ouput \n//   // purple: title https://highlightjs.readthedocs.io/en/latest/css-classes-reference.html\n//   aliases: ['pythonlogging'],\n//   contains: [\n//     {className: 'deletion', variants: [{ begin: '^ERROR', end: ':' }]},\n//     {className: 'built_in', variants: [{ begin: '^WARNING', end: ':' }]},\n//     {className: 'string', variants: [{ begin: '^INFO', end: ':' }]},\n//     {className: 'addition', variants: [{ begin: '^SUCCESS', end: ':' }]},\n//     {className: 'strong', variants: [\n//         { begin: '^WARNING', end: ':' },\n//         { begin: '^ERROR', end: ':' },\n//         { begin: '^SUCCESS', end: ':' },\n//     ]}\n//   ]\n// }});","import React from 'react';\nimport { useLocation, useParams } from \"react-router-dom\";\n// import { useParams } from 'react-router';\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\n// import { makeStyles, useTheme, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, Paper, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport { LinearProgress, Accordion, AccordionSummary, AccordionDetails, Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport DownloadJsonIcon from '@mui/icons-material/GetApp';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport PassIcon from '@mui/icons-material/CheckCircle';\nimport FailIcon from '@mui/icons-material/Error';\n// import EvaluationIcon from '@mui/icons-material/Send';\n// import EvaluationIcon from '@mui/icons-material/PlaylistAddCheck';\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport ArrowIcon from '@mui/icons-material/ArrowForward';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\n\nimport {settings, getUrlHtml} from '../settings'\n\n\nexport default function Collection() {\n  const theme = useTheme();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n\n  const classes = useStyles(theme);\n  // const { id } = useParams();\n  const evalParams: any = useParams();\n  // useLocation hook to get URL params\n  let location = useLocation();  \n  let collectionResults: any = null;\n  let assessmentsDict: any = {};\n  const [state, setState] = React.useState({\n    collectionResults: collectionResults,\n    adviceLogs: [],\n    // logLevel: 'all',\n    assessmentsDict: assessmentsDict,\n    resourceMetadata: null,\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n\n  // Run on page init\n  React.useEffect(() => {\n    // get evaluations\n    axios.get(settings.restUrl + '/collections/' + evalParams.id, {\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then((res: any) => {\n        const evalResults = res.data;\n        updateState({ collectionResults: res.data })\n      })\n\n    \n    // Get the list of assessments from API\n    if (Object.keys(state.assessmentsDict).length < 1) {\n      axios.get(settings.restUrl + '/assessments', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          // let assessmentsList: any = []\n          // res.data.map((evaluation: any, key: number) => {\n          //   evaluation['id'] = evaluation['_id']\n          //   evaluation['score_percent'] = evaluation['score']['percent']\n          //   evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n          //   evaluationsList.push(evaluation)\n          // })\n          console.log('got assesments')\n          console.log(res.data)\n          let assessmentsDict: any = {}\n          res.data.map((assess: any, key: number) => {\n            console.log(assess);\n            assessmentsDict[assess['id']] = assess\n          })\n          console.log(assessmentsDict)\n          updateState({ assessmentsDict: assessmentsDict })\n\n        })\n    }\n\n  }, [])\n\n  const colors: any = {\n    f: '#81d4fa', // blue\n    a: '#ffcc80', // orange\n    i: '#a5d6a7', // green\n    r: '#b39ddb', // purple\n    fail: '#ef5350' // red\n  }\n  const colorsLight: any = {\n    f: '#b3e5fc', // blue\n    a: '#ffe0b2', // orange\n    i: '#c8e6c9', // green\n    r: '#d1c4e9', // purple\n  }\n\n  // const getUrlHtml = (urlString: string) => {\n  //   if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n  //     // Process URIs\n  //     return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n  //   } else {\n  //     return urlString\n  //   }\n  // }\n\n  const handleLogLevelChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    updateState({'logLevel': event.target.value})\n    // hljs.highlightAll();\n  }\n  const downloadJson  = (event: React.FormEvent) => {\n    event.preventDefault();\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(state.collectionResults, null, 4)));\n    element.setAttribute('download', 'evaluation.json');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  const getBadgeFair  = (fairType: string, metricId: number) => {\n    const emojiMap: any = {\n      'f': '🔍️',\n      'a': '📬️',\n      'i': '⚙️',\n      'r': '♻️'\n    }\n    return <Chip size='medium' label={emojiMap[fairType] + ' ' + fairType.toUpperCase() + metricId.toString()}/> // blue\n  }\n\n  return(\n    <Container className='mainContainer'>\n\n      {state.collectionResults &&\n        // Display results from the JSON from the API\n        <>\n          <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(2)}}>\n            {state.collectionResults['title']} [{state.collectionResults['_id']}]\n          </Typography>\n          <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(2)}}>\n            {state.collectionResults['description']}\n          </Typography>\n          {state.collectionResults['homepage'] &&\n            <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(2)}}>\n              Homepage: {getUrlHtml(state.collectionResults['homepage'])}\n            </Typography>\n          }\n          {state.collectionResults['author'] &&\n            <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(3)}}>\n              Author: {getUrlHtml(state.collectionResults['author'])}\n            </Typography>\n          }\n          {state.collectionResults['created'] &&\n            <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: theme.spacing(3)}}>\n              Collection created on the {state.collectionResults['created']}\n            </Typography>\n          }\n\n          <Typography variant=\"h5\" style={{textAlign: 'center', marginBottom: theme.spacing(2)}}>\n            Contains assessments:\n          </Typography>\n          <Grid container spacing={1}>\n            { state.collectionResults['assessments']\n              .map((item: any, key: number) => (\n                <Grid item xs={4} display=\"flex\" key={key} style={{alignItems: 'center'}} >\n                  <ArrowIcon />\n                  {/* <div onClick={() => removeAssessment(item.id)}> */}\n                    {/* <Tooltip title='Click to remove this assessment from your collection'> */}\n                      <Paper elevation={4} className={classes.paperPadding} style={{textAlign: 'left'}}>\n                        { state.assessmentsDict[item] && \n                          <>\n                            <Box display='flex' style={{alignItems: 'center'}}>\n                              {getBadgeFair(state.assessmentsDict[item]['fair_type'], state.assessmentsDict[item]['metric_id'])}&nbsp;\n                              <Typography variant='body1'>\n                                <a href={state.assessmentsDict[item]['file_url']} target=\"_blank\" \n                                    rel=\"noopener noreferrer\" style={{color: theme.palette.primary.main, textDecoration: 'none'}}>\n                                  {state.assessmentsDict[item]['title']}\n                                </a>\n                              </Typography>\n                            </Box>\n                            <Typography variant='body2'>\n                              {state.assessmentsDict[item]['description']}\n                            </Typography>\n                            <Typography variant='body2'>\n                              Max score: {state.assessmentsDict[item]['max_score']} | Max bonus: {state.assessmentsDict[item]['max_bonus']}\n                            </Typography>\n                          </>\n                        }\n                        { !state.assessmentsDict[item] && \n                          <Typography>\n                            {item}\n                          </Typography>\n                        }\n                      </Paper>\n                    {/* </Tooltip> */}\n                  {/* </div> */}\n                </Grid>\n              ))\n              // .join(<ArrowIcon />)\n            }\n          </Grid>\n          \n          <Button\n            variant=\"contained\" \n            style={{textTransform: 'none', margin: theme.spacing(2, 2)}}\n            onClick={downloadJson}\n            startIcon={<DownloadJsonIcon />}>\n              Download the Collection as JSON-LD\n          </Button>\n\n        </>\n      }\n\n    </Container>\n  )\n}\n\n\n// Custom codeblocks highlight \n// import hljs from 'highlight.js/lib/core';\n// // import hljs from 'highlight.js'; // Too heavy, loading only required languages\n// import 'highlight.js/styles/github-dark-dimmed.css';\n// import json from 'highlight.js/lib/languages/json';\n// hljs.registerLanguage('json', json);\n// hljs.registerLanguage(\"pythonlogging\",function(e){return {\n//   // Define codeblock highlight for API tests logs ouput \n//   // purple: title https://highlightjs.readthedocs.io/en/latest/css-classes-reference.html\n//   aliases: ['pythonlogging'],\n//   contains: [\n//     {className: 'deletion', variants: [{ begin: '^ERROR', end: ':' }]},\n//     {className: 'built_in', variants: [{ begin: '^WARNING', end: ':' }]},\n//     {className: 'string', variants: [{ begin: '^INFO', end: ':' }]},\n//     {className: 'addition', variants: [{ begin: '^SUCCESS', end: ':' }]},\n//     {className: 'strong', variants: [\n//         { begin: '^WARNING', end: ':' },\n//         { begin: '^ERROR', end: ':' },\n//         { begin: '^SUCCESS', end: ':' },\n//     ]}\n//   ]\n// }});","import React, { useContext } from 'react';\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, IconButton, Paper, Card, CardContent, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport Snackbar, { SnackbarOrigin } from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport { Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\n// import CreateCollectionIcon from '@mui/icons-material/Send';\n// import CreateCollectionIcon from '@mui/icons-material/PlaylistAddCheck';\nimport CreateCollectionIcon from '@mui/icons-material/LibraryAdd';\nimport ArrowIcon from '@mui/icons-material/ArrowForward';\nimport AddIcon from '@mui/icons-material/Add';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\n// import axiosRetry from 'axios-retry';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { settings } from '../settings'\nimport { useAuth } from 'oidc-react';\nimport UserContext from '../UserContext';\n\n// import OAuth2Login from 'react-simple-oauth2-login';\n\nexport default function Evaluation() {\n  const theme = useTheme();\n  const history = useHistory();\n  const { user }: any = useContext(UserContext);\n  // const auth = useAuth();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n      margin: theme.spacing(2, 2)\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n  const classes = useStyles();\n\n  // useLocation hook to get URL params\n  // let location = useLocation();  \n  let evaluationResults: any = null;\n  let currentUser: any = null;\n  let addedAssessments: any = [];\n  const [state, setState] = React.useState({\n    currentUser: currentUser,\n    accessToken: null,\n    loggedIn: false,\n    assessmentsList: [],\n    addedAssessments: addedAssessments,\n    collectionId: '',\n    collectionTitle: '',\n    collectionDescription: '',\n    collectionHomepage: '',\n    collectionCreatedSnackbar: null,\n    errorMessage: null,\n    // urlToEvaluate: \"https://doi.org/10.1594/PANGAEA.908011\",\n    // // urlToEvaluate: \"https://doi.org/10.1038/sdata.2016.18\",\n    // evaluationResults: evaluationResults,\n    // adviceLogs: [],\n    // evaluationRunning: false,\n    // evaluationsList: [],\n    // metadata_service_endpoint: 'https://ws.pangaea.de/oai/provider',\n    // use_datacite: true,\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n  // Settings for Popper\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl]: any = React.useState(null);\n  const handleClick = (event: any) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n    // setAnchorEl(anchorEl ? null : document.body);\n    setOpen((prev) => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n    setAnchorEl(anchorEl ? null : anchorEl);\n  };\n  const id = open ? 'simple-popper' : undefined;\n  \n  // response.headers.get(\"Authorization\").replace('Bearer ', '')\n  // Run on page init\n  React.useEffect(() => {\n    // Check if user logged in\n    const localStorageConfig: any = localStorage.getItem(\"fairEnoughSettings\");\n    let configState: any = JSON.parse(localStorageConfig);\n    console.log(localStorageConfig);\n    console.log(settings.restUrl);\n    // if (!state.currentUser && configState && configState['access_token']) {\n    //   console.log(configState);\n    //   // Qet current user from API to check if access token still valid\n    //   axios.get(settings.restUrl + '/current-user', {\n    //     headers: {\n    //       'Content-Type': 'application/json',\n    //       'Authorization': 'Bearer ' + configState['access_token']\n    //     },\n    //   })\n    //     .then((res: any) => {\n    //       console.log('got current user')\n    //       console.log(res.data)\n    //       if (res.data['id']) {\n    //         updateState({ currentUser: res.data, accessToken: configState['access_token'], loggedIn: true})\n    //       }\n    //       // if (res.data['error'] == 'access_denied') {\n    //     })\n\n    //   updateState({ currentUser: {token: configState.access_token} })\n    // }\n\n    // axios.post(settings.restUrl + '/login', {\n    //   headers: {'Content-Type': 'application/json'},\n    // })\n    //   .then((res: any) => {\n    //     // let assessmentsList: any = []\n    //     // res.data.map((evaluation: any, key: number) => {\n    //     //   evaluation['id'] = evaluation['_id']\n    //     //   evaluation['score_percent'] = evaluation['score']['percent']\n    //     //   evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n    //     //   evaluationsList.push(evaluation)\n    //     // })\n    //     console.log('got login')\n    //     console.log(res.data)\n    //     console.log(res.headers)\n    //     // updateState({ assessmentsList: res.data })\n\n    //   })\n\n    // Get the list of assessments from API\n    if (state.assessmentsList.length < 1) {\n      axios.get(settings.restUrl + '/assessments', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          // let assessmentsList: any = []\n          // res.data.map((evaluation: any, key: number) => {\n          //   evaluation['id'] = evaluation['_id']\n          //   evaluation['score_percent'] = evaluation['score']['percent']\n          //   evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n          //   evaluationsList.push(evaluation)\n          // })\n          console.log('got assesments')\n          console.log(res.data)\n          updateState({ assessmentsList: res.data })\n\n        })\n    }\n  }, [])\n\n  const getUrlHtml = (urlString: string) => {\n    if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n      // Process URIs\n      return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n    } else {\n      return urlString\n    }\n  }\n\n  const getBadgeFair  = (fairType: string, metricId: number) => {\n    const emojiMap: any = {\n      'f': '🔍️',\n      'a': '📬️',\n      'i': '⚙️',\n      'r': '♻️'\n    }\n    return <Chip size='medium' label={emojiMap[fairType] + ' ' + fairType.toUpperCase() + metricId.toString()}/> // blue\n  }\n  const getBadgeRole  = (role: string) => {\n    const colorMap: any = {\n      'harvest': 'secondary',\n      'test': 'default',\n    }\n    return <Chip size='medium' color={colorMap[role]} label={role}/>\n  }\n\n  const handleTextFieldChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    // Set the TextField input to the state variable corresponding to the field id  \n    updateState({[event.target.id]: event.target.value})\n  }\n  function handleClose (event: any, reason: any) {\n    updateState({ collectionCreatedSnackbar: null, errorMessage: null});\n  };\n  const handleSubmit  = (event: React.FormEvent) => {\n    event.preventDefault();\n    // doEvaluateUrl(state.urlToEvaluate)\n    let assessmentsInCollec: any = []\n    state.addedAssessments.map((item: any, key: number) => {\n      assessmentsInCollec.push(item.id)\n    })\n    const postCollec = {\n      'id': state.collectionId,\n      'title': state.collectionTitle,\n      'description': state.collectionDescription,\n      'homepage': state.collectionHomepage,\n      'assessments': assessmentsInCollec,\n    }\n    // console.log(settings.restUrl);\n    console.log(user['access_token']);\n    axios.post(settings.restUrl + '/collections', \n      postCollec, \n      {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + user['access_token']\n        },\n      }\n    )\n      .then((res: any) => {\n        console.log('New collection ' + postCollec.id + ' successfully created.')\n        console.log(res.data)\n        updateState({ collectionCreatedSnackbar: 'Collection ' + postCollec.id + ' successfully created' })\n        // if (res.data['id']) {\n        //   updateState({ currentUser: res.data, loggedIn: true })\n        // }\n        // if (res.data['error'] == 'access_denied') {\n      })\n      .catch(function (error) {\n        if (error.response) {\n          // Request made and server responded\n          // {\"detail\":[{\"loc\":[\"body\",\"homepage\"],\"msg\":\"invalid or missing URL scheme\",\"type\":\"value_error.url.scheme\"}]}\n          \n          if (error.response.data[\"detail\"]) {\n            updateState({ errorMessage: 'Error: ' + JSON.stringify(error.response.data[\"detail\"])})\n          // } else if (error.response.data[\"detail\"][0]['loc']) {\n          //   const errorMsg = 'Error: ' + error.response.data[\"detail\"][0]['loc'][1] + ' ' + error.response.data[\"detail\"][0]['msg']\n          //   updateState({ errorMessage: errorMsg })\n          } else {\n            updateState({ errorMessage: JSON.stringify(error.response.data) })\n          }\n        } else if (error.request) {\n          // The request was made but no response was received\n          console.log('request err');\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log('Error', error.message);\n          updateState({ errorMessage: error.message })\n        }\n    \n      });\n\n  }\n  const addAssessment  = (assessment: any) => {\n    // event.preventDefault();\n    // console.log(user)\n    updateState({addedAssessment: state.addedAssessments.push(assessment)})\n  }\n  const removeAssessment  = (assessmentId: any) => {\n    // event.preventDefault();\n    // console.log(state.addedAssessments)\n    // console.log(state.addedAssessments.filter(( obj: any ) => {\n    //   return obj.id !== assessmentId;\n    // }))\n    updateState({addedAssessments: state.addedAssessments.filter(( obj: any ) => {\n      return obj.id !== assessmentId;\n    })})\n  }\n\n  // const BorderLinearProgress = withStyles({\n  //   root: {\n  //     height: 20,\n  //     width: \"100%\",\n  //     // backgroundColor: hex ? lighten(internalColor, 0.5) : undefined,\n  //     borderRadius: \"10px\"\n  //   },\n  //   bar: {\n  //     borderRadius: 20,\n  //     // backgroundColor: hex ? internalColor : undefined\n  //   }\n  // })(LinearProgress);\n\n  return(\n    <Container className='mainContainer'>\n      <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n        Create a collection of assessments\n      </Typography>\n\n      { user['username'] &&\n        <Typography style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n          ✅ Logged in as {user['username']}\n        </Typography>\n      }\n      { !user['username'] &&\n          <Typography style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n            ⚠️ You need to login with your ORCID to create a new collection\n          </Typography>\n        }\n\n      {/* Form to provide the URL to evaludate */}\n      <form onSubmit={handleSubmit}>\n        {/* <Box display=\"flex\" style={{margin: theme.spacing(0, 6)}}> */}\n          <TextField\n            id='collectionId'\n            label='Collection ID'\n            placeholder='Collection ID'\n            value={state.collectionId}\n            className={classes.fullWidth}\n            variant=\"outlined\"\n            onChange={handleTextFieldChange}\n            // size='small'\n            InputProps={{\n              className: classes.formInput\n            }}\n            style={{margin: theme.spacing(1, 0)}}\n          />\n\n          <TextField\n            id='collectionTitle'\n            label='Collection Title'\n            placeholder='Collection Title'\n            value={state.collectionTitle}\n            className={classes.fullWidth}\n            variant=\"outlined\"\n            onChange={handleTextFieldChange}\n            InputProps={{\n              className: classes.formInput\n            }}\n            style={{margin: theme.spacing(1, 0)}}\n          />\n\n          <TextField\n            id='collectionDescription'\n            label='Collection Description'\n            placeholder='Collection Description'\n            value={state.collectionDescription}\n            className={classes.fullWidth}\n            variant=\"outlined\"\n            onChange={handleTextFieldChange}\n            InputProps={{\n              className: classes.formInput\n            }}\n          />\n\n          <TextField\n            id='collectionHomepage'\n            label='Collection Homepage'\n            placeholder='Collection Homepage'\n            value={state.collectionHomepage}\n            className={classes.fullWidth}\n            variant=\"outlined\"\n            onChange={handleTextFieldChange}\n            InputProps={{\n              className: classes.formInput\n            }}\n            style={{margin: theme.spacing(1, 0)}}\n          />\n\n          <Typography variant=\"h5\" style={{textAlign: 'center', margin: theme.spacing(3, 0)}}>\n            Assessments in your collection:\n          </Typography>\n          <Grid container spacing={1}>\n            { state.addedAssessments\n              .map((item: any, key: number) => (\n                <Grid item xs={3} display=\"flex\" key={key} style={{alignItems: 'center'}} >\n                  <ArrowIcon />\n                  <div onClick={() => removeAssessment(item.id)}>\n                    <Tooltip title='Click to remove this assessment from your collection'>\n                      <Paper elevation={4} className={classes.paperPadding} style={{textAlign: 'left', cursor: 'pointer'}}>\n                        {/* <Box display='flex' style={{alignItems: 'center'}}> */}\n                        <Typography>\n                          {item.title}\n                        </Typography>\n                        {getBadgeFair(item.fair_type, item.metric_id)}&nbsp;\n                        {getBadgeRole(item.role)}&nbsp;\n                        {/* </Box> */}\n                        {/* <Typography variant='body2'>\n                          <a href={item.file_url} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{item.id}</a>\n                        </Typography> */}\n                      </Paper>\n                    </Tooltip>\n                  </div>\n                </Grid>\n              ))\n              // .join(<ArrowIcon />)\n            }\n            { state.addedAssessments.length < 1 &&\n              <Grid item xs={12}>\n                <Typography style={{textAlign: 'center'}}>\n                  No assessments added, click on the assessments in the list below to add them to your collection.\n                </Typography>\n              </Grid>\n            }\n          </Grid>\n\n          <Typography variant=\"h5\" style={{textAlign: 'center', margin: theme.spacing(3, 0)}}>\n            Add assessments to your collection:\n          </Typography>\n          <Typography variant=\"body1\" style={{textAlign: 'center', margin: theme.spacing(3, 0)}}>\n            ⚠️ The order of the assessments in your collection matters, since they will be run one after the other in this order.\n            Some assessments harvest metadata, when others assessments will run some checks (sometime on the previously harvested metadata). \n            It is recommended to put harvester assessments at the start of your collection.\n          </Typography>\n          <Grid container spacing={1}>\n            { state.assessmentsList\n              .filter((item: any) => {\n                let filterItem = true\n                state.addedAssessments.map((addedAssess: any, key: number) => {\n                  if (addedAssess.id == item.id) {\n                    filterItem = false\n                  }\n                })\n                return filterItem\n              })\n              .sort((a: any, b: any) => {\n                // harvest first, then F, then per alphabetic order to get FAIR order\n                if ( a.role == 'harvest' && b.role != 'harvest' ){\n                  return -1;\n                }\n                if ( a.role != 'harvest' && b.role == 'harvest' ){\n                  return 1;\n                }\n                if ( a.fair_type == 'f' && b.fair_type != 'f' ){\n                  return -1;\n                }\n                if ( a.fair_type != 'f' && b.fair_type == 'f' ){\n                  return 1;\n                }\n                if ( a.fair_type + a.metric_id < b.fair_type + b.metric_id ){\n                  return -1;\n                }\n                if ( a.fair_type + a.metric_id > b.fair_type + b.metric_id ){\n                  return 1;\n                }\n                return 0;\n              })\n              .map((item: any, key: number) => (\n                <Grid item xs={6} key={key} style={{alignItems: 'center'}}>\n                  {/* onClick={addAssessment(item)}  */}\n                  {/* <div onClick={(event) => { addAssessment(item)} }> */}\n                    <Paper elevation={4} className={classes.paperPadding} style={{textAlign: 'left'}}>\n                        <Box display='flex' style={{alignItems: 'center'}}>\n                          <Tooltip title={'Add ' + item.id + ' to your collection'}>\n                            <IconButton color='primary'\n                                // sx={{ borderRadius: 28 }} \n                                style={{marginRight: theme.spacing(1)}} \n                                onClick={() => addAssessment(item)}>\n                              <AddIcon />\n                            </IconButton>\n                          </Tooltip>\n                          {getBadgeFair(item.fair_type, item.metric_id)}&nbsp;\n                          {getBadgeRole(item.role)}&nbsp;\n                          <Typography variant='h6'>\n                            {item.title}\n                          </Typography>\n                        </Box>\n                        <Typography variant='body2'>\n                          <a onClick={(event) => {} } href={item.file_url} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{item.id}</a>\n                        </Typography>\n                        <Typography variant='body2'>{item.description}</Typography>\n                        <Typography variant='body2'>Max score: {item.max_score} | Max bonus: {item.max_bonus}</Typography>\n                    </Paper>\n                  {/* </div> */}\n                </Grid>\n            ))}\n          </Grid>\n\n\n          {/* <Tooltip  title='Evaluator settings'>\n            <Button style={{margin: theme.spacing(1)}} onClick={handleClick}>\n              <SettingsIcon />\n            </Button>\n          </Tooltip> */}\n          {/* <Popper open={open} anchorEl={anchorEl}>\n            <ClickAwayListener onClickAway={handleClickAway}>\n              <Paper elevation={4} className={classes.paperPadding} style={{textAlign: 'center'}}>\n                <Typography variant=\"h6\" style={{textAlign: 'center'}}>\n                  Evaluator settings\n                </Typography> \n                <Grid container spacing={1}>\n                  <Grid item xs={12}>\n                    <Tooltip title='By default, the FAIR Enough evaluator uses content negociation based on the DOI URL to retrieve DataCite JSON metadata. If you uncheck this option F-UJI will try to use the landing page URL instead.'>\n                      <FormControlLabel\n                        control={\n                          <Checkbox\n                            checked={state.use_datacite}\n                            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                              updateState({[event.target.name]: event.target.checked});\n                            }}\n                            name=\"use_datacite\"\n                            color=\"primary\"\n                          />\n                        }\n                        label=\"Use DataCite\"\n                      />\n                    </Tooltip>\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Tooltip title='OAI-PMH (Open Archives Initiative Protocol for Metadata Harvesting) endpoint to use when searching for metadata about this resource.'>\n                      <TextField\n                        id='metadata_service_endpoint'\n                        label='OAI-PMH metadata endpoint URL'\n                        placeholder='OAI-PMH metadata endpoint URL'\n                        value={state.metadata_service_endpoint}\n                        className={classes.fullWidth}\n                        variant=\"outlined\"\n                        onChange={handleTextFieldChange}\n                        // size='small'\n                        InputProps={{\n                          className: classes.formInput\n                        }}\n                      />\n                    </Tooltip>\n                    <FormHelperText>List of OAI-PMH providers: {getUrlHtml('https://www.openarchives.org/Register/BrowseSites')}</FormHelperText>\n                  </Grid>\n                </Grid>\n              </Paper>\n            </ClickAwayListener>\n          </Popper> */}\n        {/* </Box> */}\n\n        <Button type=\"submit\" \n          variant=\"contained\" \n          disabled={!user['username']}\n          // className={classes.submitButton} \n          style={{marginTop: theme.spacing(2), marginBottom: theme.spacing(4)}}\n          startIcon={<CreateCollectionIcon />}\n          color=\"secondary\" >\n            Publish the collection\n        </Button>\n\n        <Snackbar anchorOrigin={{vertical: 'bottom', horizontal: 'center' }} open={state.collectionCreatedSnackbar ? true : false} onClose={handleClose} autoHideDuration={6000}>\n          <MuiAlert elevation={6} severity=\"success\">\n            {state.collectionCreatedSnackbar}\n          </MuiAlert>\n        </Snackbar>\n        <Snackbar anchorOrigin={{vertical: 'bottom', horizontal: 'center' }} open={state.errorMessage ? true : false} onClose={handleClose} autoHideDuration={6000}>\n          <MuiAlert elevation={6} severity=\"error\">\n            {state.errorMessage}\n          </MuiAlert>\n        </Snackbar>\n\n        { !user['username'] &&\n          <Typography style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n            ⚠️ You need to login with your ORCID to create a new collection.\n          </Typography>\n        }\n      </form>\n\n    </Container>\n  )\n}\n\n","import React from 'react';\nimport { useLocation, useHistory, Link } from \"react-router-dom\";\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, Paper, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport { Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\n// import CreateCollectionIcon from '@mui/icons-material/Send';\n// import CreateCollectionIcon from '@mui/icons-material/PlaylistAddCheck';\nimport CreateCollectionIcon from '@mui/icons-material/LibraryAdd';\nimport CollectionIcon from '@mui/icons-material/CollectionsBookmark';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams, GridSortModel } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { settings } from '../settings'\n// import { useAuth } from 'oidc-react';\n\nexport default function Collections() {\n  const theme = useTheme();\n  const history = useHistory();\n  // const auth = useAuth();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n  const classes = useStyles();\n\n  // useLocation hook to get URL params\n  let location = useLocation();  \n  let evaluationResults: any = null;\n  let resourceMetadata: any = null;\n  let fairDoughnutConfig: any = null;\n  const [state, setState] = React.useState({\n    urlToEvaluate: \"https://doi.org/10.1594/PANGAEA.908011\",\n    // urlToEvaluate: \"https://doi.org/10.1038/sdata.2016.18\",\n    evaluationResults: evaluationResults,\n    collectionsList: [],\n    evaluationRunning: false,\n    evaluationsList: [],\n    metadata_service_endpoint: 'https://ws.pangaea.de/oai/provider',\n    use_datacite: true,\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n  // Settings for Popper\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl]: any = React.useState(null);\n  const handleClick = (event: any) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n    // setAnchorEl(anchorEl ? null : document.body);\n    setOpen((prev) => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n    setAnchorEl(anchorEl ? null : anchorEl);\n  };\n  const id = open ? 'simple-popper' : undefined;\n  \n\n  // Run on page init\n  React.useEffect(() => {\n    // Get the edit URL param if provided\n    // const params = new URLSearchParams(location.search + location.hash);\n    // let urlToEvaluate = params.get('evaluate');\n    // if (urlToEvaluate) {\n    //   updateState({ urlToEvaluate: urlToEvaluate })\n    //   doEvaluateUrl(urlToEvaluate)\n    // }\n\n    // Get the list of collections from API\n    if (state.collectionsList.length < 1) {\n      axios.get(settings.restUrl + '/collections', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          let collectionsList: any = []\n          res.data.map((collec: any, key: number) => {\n            collec['id'] = collec['_id']\n            // evaluation['score_percent'] = evaluation['score']['percent']\n            // evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n            collectionsList.push(collec)\n          })\n          updateState({ collectionsList: collectionsList })\n\n        })\n    }\n  }, [])\n\n  const colors: any = {\n    f: '#81d4fa', // blue\n    a: '#ffcc80', // orange\n    i: '#a5d6a7', // green\n    r: '#b39ddb', // purple\n    fail: '#ef5350' // red\n  }\n  const colorsLight: any = {\n    f: '#b3e5fc', // blue\n    a: '#ffe0b2', // orange\n    i: '#c8e6c9', // green\n    r: '#d1c4e9', // purple\n  }\n\n  const getUrlHtml = (urlString: string) => {\n    if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n      // Process URIs\n      return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n    } else {\n      return urlString\n    }\n  }\n\n  const handleTextFieldChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    // Set the TextField input to the state variable corresponding to the field id  \n    updateState({[event.target.id]: event.target.value})\n  }\n  // const handleSubmit  = (event: React.FormEvent) => {\n  //   event.preventDefault();\n  //   doEvaluateUrl(state.urlToEvaluate)\n  // }\n\n  // const BorderLinearProgress = withStyles({\n  //   root: {\n  //     height: 20,\n  //     width: \"100%\",\n  //     // backgroundColor: hex ? lighten(internalColor, 0.5) : undefined,\n  //     borderRadius: \"10px\"\n  //   },\n  //   bar: {\n  //     borderRadius: 20,\n  //     // backgroundColor: hex ? internalColor : undefined\n  //   }\n  // })(LinearProgress);\n\n\n  const columns: GridColumns = [\n    // { field: 'id', headerName: 'ID', hide: false },\n    { \n      field: 'id', headerName: 'Access collection', flex: 0.7,\n      renderCell: (params: GridRenderCellParams) => (\n        // <Button href={'/#/evaluation/' + params.value as string}\n        <Link to={'/collection/' + params.value as string}>\n          <Button variant=\"contained\" \n              className={classes.submitButton} \n              // startIcon={<CollectionIcon />}\n              color=\"primary\">\n            {params.value as string}\n          </Button>\n        </Link>)\n    },\n    { field: 'title', headerName: 'Title', flex: 1 },\n    {\n      field: 'homepage', headerName: 'Homepage', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    },\n    {\n      field: 'created', headerName: 'Date created', flex: 0.4,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {params.value as string}\n        </>)\n    },\n    {\n      field: 'author', headerName: 'Author', flex: 1,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    },\n    // TODO: calculate max_score and max_bonus for each collection\n    // {\n    //   field: 'max_score', headerName: 'FAIR compliant', flex: 0.5,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {params.value as string}%\n    //     </>)\n    // },\n    // {\n    //   field: 'max_bonus', headerName: 'FAIR Role Model', flex: 0.5,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {params.value as string}%\n    //     </>)\n    // }\n  ]\n  \n  const [sortModel, setSortModel] = React.useState<GridSortModel>([\n    {\n      field: 'created',\n      sort: 'desc',\n    },\n  ]);\n\n  return(\n    <Container className='mainContainer'>\n      <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n        Collections of assessments\n      </Typography>\n\n      <Link to=\"/collection/create\">\n        <Button variant=\"contained\" \n          // className={classes.submitButton} \n          style={{marginTop: theme.spacing(2), marginBottom: theme.spacing(4)}}\n          startIcon={<CreateCollectionIcon />}\n          color=\"secondary\" >\n            Create a new collection\n        </Button>\n      </Link>\n\n      {/* <Link to=\"/collections\" className={classes.linkButton}>\n          <Tooltip title='Browse existing Collections of assessments'>\n            <Button style={{color: '#fff'}}>\n              <InfoIcon />\n              Collections\n            </Button>\n          </Tooltip>\n        </Link> */}\n\n      {/* {state.evaluationRunning && \n        <CircularProgress style={{margin: theme.spacing(5, 0)}} />\n      } */}\n\n      {/* Display the Data table listing the Evaluations */}\n      {state.collectionsList.length > 0 && \n        <div style={{ height: 600, width: '100%' }}>\n          {console.log(state.collectionsList)}\n          <DataGrid\n            columns={columns}\n            rows={state.collectionsList}\n            // {...state.evaluationsList}\n            components={{\n              Toolbar: GridToolbar,\n            }}\n            sortModel={sortModel}\n            onSortModelChange={(model) => setSortModel(model)}\n            style={{backgroundColor: '#fff'}}\n          />\n        </div>\n      }\n    </Container>\n  )\n}\n\n","import React from 'react';\nimport { useLocation, useHistory, Link } from \"react-router-dom\";\nimport { useTheme } from '@mui/material/styles';\nimport { makeStyles, withStyles } from '@mui/styles';\nimport { Typography, Container, Button, List, ListItem, ListItemAvatar, Avatar, ListItemText, Paper, Box, FormControl, Chip, Tooltip, TextField, CircularProgress, Grid, Select, MenuItem, InputLabel } from \"@mui/material\";\nimport { Popper, ClickAwayListener, Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\n// import CreateCollectionIcon from '@mui/icons-material/Send';\n// import CreateCollectionIcon from '@mui/icons-material/PlaylistAddCheck';\nimport CreateCollectionIcon from '@mui/icons-material/LibraryAdd';\nimport CollectionIcon from '@mui/icons-material/CollectionsBookmark';\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport CopyIcon from '@mui/icons-material/FileCopy';\nimport NewFolderIcon from '@mui/icons-material/CreateNewFolder';\nimport EditIcon from '@mui/icons-material/Edit';\nimport CodeIcon from '@mui/icons-material/Code';\nimport AssessmentIcon from '@mui/icons-material/CheckCircle';\nimport RdfIcon from '@mui/icons-material/Assignment';\n\nimport { DataGrid, GridToolbar, GridColumns, GridRenderCellParams, GridSortModel } from '@mui/x-data-grid';\n// import Pagination from '@mui/material/Pagination';\n\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\n// import { Doughnut } from 'react-chartjs-2';\n// import ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { settings } from '../settings'\n// import { useAuth } from 'oidc-react';\n\nimport hljs from 'highlight.js/lib/core';\n// // import hljs from 'highlight.js'; // Too heavy, loading only required languages\nimport 'highlight.js/styles/github-dark-dimmed.css';\nimport python from 'highlight.js/lib/languages/python';\n// import turtle from 'highlightjs-turtle';\n// var hljsDefineTurtle = require('highlightjs-turtle');\nhljs.registerLanguage('python', python);\n\nexport default function Assessments() {\n  const theme = useTheme();\n  const history = useHistory();\n  // const auth = useAuth();\n\n  const useStyles = makeStyles(() => ({\n    link: {\n      color: theme.palette.primary.main,\n      textDecoration: 'none',\n      // color: 'inherit',\n      '&:hover': {\n        color: theme.palette.primary.light,\n        textDecoration: 'none',\n      },\n    },\n    submitButton: {\n      textTransform: 'none',\n      margin: theme.spacing(2, 2),\n    },\n    fullWidth: {\n      width: '100%',\n    },\n    autocomplete: {\n      marginRight: theme.spacing(2)\n    },\n    formInput: {\n      background: 'white',\n      width: '100%'\n    },\n    paperPadding: {\n      padding: theme.spacing(2, 2),\n      margin: theme.spacing(2, 2),\n    },\n  }))\n  const classes = useStyles();\n\n  // useLocation hook to get URL params\n  let location = useLocation();  \n  let evaluationResults: any = null;\n  let resourceMetadata: any = null;\n  let fairDoughnutConfig: any = null;\n  const [state, setState] = React.useState({\n    assessmentsList: [],\n  });\n  const stateRef = React.useRef(state);\n  // Avoid conflict when async calls\n  const updateState = React.useCallback((update) => {\n    stateRef.current = {...stateRef.current, ...update};\n    setState(stateRef.current);\n  }, [setState]);\n\n  // Settings for Popper\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl]: any = React.useState(null);\n  const handleClick = (event: any) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n    // setAnchorEl(anchorEl ? null : document.body);\n    setOpen((prev) => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n    setAnchorEl(anchorEl ? null : anchorEl);\n  };\n  const id = open ? 'simple-popper' : undefined;\n  \n\n  // Run on page init\n  React.useEffect(() => {\n    // Get the edit URL param if provided\n    // const params = new URLSearchParams(location.search + location.hash);\n    // let urlToEvaluate = params.get('evaluate');\n    // if (urlToEvaluate) {\n    //   updateState({ urlToEvaluate: urlToEvaluate })\n    //   doEvaluateUrl(urlToEvaluate)\n    // }\n    hljs.highlightAll();\n\n    // Get the list of collections from API\n    if (state.assessmentsList.length < 1) {\n      axios.get(settings.restUrl + '/assessments', {\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((res: any) => {\n          console.log(res.data)\n          let assessmentsList: any = []\n          res.data.map((collec: any, key: number) => {\n            // collec['id'] = collec['file_url']\n            // collec['id'] = collec['filename']\n            collec['fair_metric'] = collec['fair_type'].toUpperCase() + collec['metric_id'] + ' (' + collec['role'] + ')'\n            // evaluation['score_percent'] = evaluation['score']['percent']\n            // evaluation['bonus_percent'] = evaluation['score']['bonus_percent']\n            assessmentsList.push(collec)\n          })\n          console.log(assessmentsList)\n          updateState({ assessmentsList: assessmentsList })\n\n        })\n    }\n  }, [])\n\n  // const colors: any = {\n  //   f: '#81d4fa', // blue\n  //   a: '#ffcc80', // orange\n  //   i: '#a5d6a7', // green\n  //   r: '#b39ddb', // purple\n  //   fail: '#ef5350' // red\n  // }\n  // const colorsLight: any = {\n  //   f: '#b3e5fc', // blue\n  //   a: '#ffe0b2', // orange\n  //   i: '#c8e6c9', // green\n  //   r: '#d1c4e9', // purple\n  // }\n\n  const getUrlHtml = (urlString: string) => {\n    if(/^(?:node[0-9]+)|((https?|ftp):.*)$/.test(urlString)) {\n      // Process URIs\n      return <a href={urlString} className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">{urlString}</a>\n    } else {\n      return urlString\n    }\n  }\n\n  // const handleTextFieldChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  //   // Set the TextField input to the state variable corresponding to the field id  \n  //   updateState({[event.target.id]: event.target.value})\n  // }\n  // const handleSubmit  = (event: React.FormEvent) => {\n  //   event.preventDefault();\n  //   doEvaluateUrl(state.urlToEvaluate)\n  // }\n\n  // const BorderLinearProgress = withStyles({\n  //   root: {\n  //     height: 20,\n  //     width: \"100%\",\n  //     // backgroundColor: hex ? lighten(internalColor, 0.5) : undefined,\n  //     borderRadius: \"10px\"\n  //   },\n  //   bar: {\n  //     borderRadius: 20,\n  //     // backgroundColor: hex ? internalColor : undefined\n  //   }\n  // })(LinearProgress);\n\n\n  const columns: GridColumns = [\n    // { field: 'id', headerName: 'ID', hide: false },\n    { \n      field: 'id', headerName: 'Access assessment', flex: 0.5,\n      renderCell: (params: GridRenderCellParams) => (\n        // <Button href={'/#/evaluation/' + params.value as string}\n        // <Link to={'/assessment/' + params.value as string}>\n        <Button variant=\"contained\" target=\"_blank\" rel=\"noopener noreferrer\"\n            href={'https://github.com/MaastrichtU-IDS/fair-enough/blob/main/backend/app/assessments/' + params.value as string + '.py'}\n            className={classes.submitButton} \n            // startIcon={<CollectionIcon />}\n            style={{textTransform: 'none'}}\n            color=\"primary\">\n          {params.value as string}.py\n        </Button>\n        )\n    },\n    { field: 'fair_metric', headerName: 'FAIR metric', flex: 0.25 },\n    { field: 'title', headerName: 'Title', flex: 0.9 },\n    { field: 'max_score', headerName: 'Score', flex: 0.15 },\n    { field: 'max_bonus', headerName: 'Bonus', flex: 0.15 },\n    // {\n    //   field: 'homepage', headerName: 'Homepage', flex: 1,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {getUrlHtml(params.value as string)}\n    //     </>)\n    // },\n    // {\n    //   field: 'created', headerName: 'Date created', flex: 0.4,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {params.value as string}\n    //     </>)\n    // },\n    {\n      field: 'author', headerName: 'Author', flex: 0.5,\n      renderCell: (params: GridRenderCellParams) => (\n        <>\n          {getUrlHtml(params.value as string)}\n        </>)\n    },\n    // TODO: calculate max_score and max_bonus for each collection\n    // {\n    //   field: 'max_score', headerName: 'FAIR compliant', flex: 0.5,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {params.value as string}%\n    //     </>)\n    // },\n    // {\n    //   field: 'max_bonus', headerName: 'FAIR Role Model', flex: 0.5,\n    //   renderCell: (params: GridRenderCellParams) => (\n    //     <>\n    //       {params.value as string}%\n    //     </>)\n    // }\n  ]\n  \n  const [sortModel, setSortModel] = React.useState<GridSortModel>([\n    {\n      field: 'fair_metric',\n      sort: 'asc',\n    },\n  ]);\n\n  return(\n    <Container className='mainContainer' style={{textAlign: 'left'}}>\n      <Typography variant=\"h4\" style={{textAlign: 'center', marginBottom: theme.spacing(4)}}>\n        Assessments\n      </Typography>\n\n      <Typography variant=\"body1\" style={{textAlign: 'left', marginBottom: theme.spacing(3), marginTop: theme.spacing(2)}}>\n        You can find all assessments as python scripts in the fair-enough GitHub repository: <a href='https://github.com/MaastrichtU-IDS/fair-enough/tree/main/backend/app/assessments' target=\"_blank\" rel=\"noopener noreferrer\">backend/app/assessments</a>\n      </Typography>\n\n      {/* Display the Data table listing the Assessments */}\n      {state.assessmentsList.length > 0 && \n        <div style={{ height: 600, width: '100%' }}>\n          {console.log(state.assessmentsList)}\n          <DataGrid\n            columns={columns}\n            rows={state.assessmentsList}\n            // {...state.evaluationsList}\n            components={{\n              Toolbar: GridToolbar,\n            }}\n            sortModel={sortModel}\n            onSortModelChange={(model) => setSortModel(model)}\n            style={{backgroundColor: '#fff'}}\n          />\n        </div>\n      }\n\n      <Typography variant=\"h4\" style={{textAlign: 'center', margin: theme.spacing(4, 0)}}>\n        Add new assessments\n      </Typography>\n\n      <Typography variant=\"body1\" style={{textAlign: 'left', marginBottom: theme.spacing(1), marginTop: theme.spacing(4)}}>\n        Feel free to add new assessments and send a pull request! To create a new assessment:\n      </Typography>\n\n      <List>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <NewFolderIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText>\n            Fork this repository, and optionally create a new folder in <code>backend/app/assessments</code> if you want to group multiple assessments under a same folder \n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <CopyIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText>\n            Copy an existing assessment to get started, such as <code>a1_access_protocol.py</code>\n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <EditIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText> \n            Change the attributes of the <code>Assessment</code> class to describe it so that users can easily understand what your assessment does. Provide your ORCID URL in the <code>author</code> attribute,\n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <CodeIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText> \n            Add the code in the <code>evaluate()</code> function, 2 variables are passed to the assessment, plus you can access the assessment object itself to log what the test is trying to do, and why it success or fail:\n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          {/* <ListItemAvatar>\n            <Avatar>\n              <CollectionIcon />\n            </Avatar>\n          </ListItemAvatar> */}\n          {/* <ListItemText> \n            Add the code in the <code>evaluate()</code> function, 2 variables are passed to the assessment, plus you can access the assessment object itself to log what the test is trying to do, and why it success or fail:\n          </ListItemText> */}\n          <List>\n            <ListItem>\n              <ListItemAvatar>\n                <Avatar>\n                  <EvaluationIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText>\n                <code>eval</code>: evaluation object that you can use to pass data between assessments (e.g. to pass the license URL, or JSON-LD metadata your assessment retrieves)\n              </ListItemText>\n            </ListItem>\n            <ListItem>\n              <ListItemAvatar>\n                <Avatar>\n                  <RdfIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText>\n                <code>g</code>: RDFLib graph of the RDF retrieved when searching for the resource metadata\n              </ListItemText>\n            </ListItem>\n            <ListItem>\n              <ListItemAvatar>\n                <Avatar>\n                  <AssessmentIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText>\n                <code>self</code>: the assessment object itself, can be used to perform various logging actions related to the test (don't use <code>print</code> otherwise it will not show up in the evaluation results returned by the API)\n              </ListItemText>\n            </ListItem>\n          </List>\n        </ListItem>\n\n      </List>\n\n      <pre>\n        <code className=\"language-python\" style={{whiteSpace: 'pre-wrap', overflowX: 'auto'}}>\n          {`self.log('This print a regular event', '✔️')\nself.success('This will also increase the score of the assessment by 1')\nself.bonus('This will also increase the bonus score of the assessment by 1')\nself.warning('This will print a warning while running the assessment')\nself.error('This will print a failure while running the assessment')\n# We provide also some helpers, e.g. to parse RDF (cf. models/assessments.py)\ng = self.parseRDF(rdf_data, 'text/turtle', msg='content negotiation RDF')`}\n        </code>\n      </pre>\n\n      <Typography variant=\"body1\" style={{textAlign: 'left', marginBottom: theme.spacing(1)}}>\n        Once you created your assessment, you can test it locally before submitting a pull request.\n        <br/><br/>\n        Start the stack with docker-compose following the instructions in the <a href='https://github.com/MaastrichtU-IDS/fair-enough#readme' target=\"_blank\" rel=\"noopener noreferrer\">README</a>. \n        You can quickly test your assessment only on a resource URI with the <a href={settings.docsUrl + '#/assessments/run_assessment_rest_assessments_post'} target=\"_blank\" rel=\"noopener noreferrer\">POST /assessments</a> operation in the API, \n        or you can also create a new collection, if you want to try it as part of a collection.\n      </Typography>\n\n      {/* <Link to=\"/collection/create\">\n        <Button variant=\"contained\" \n          // className={classes.submitButton} \n          style={{marginTop: theme.spacing(2), marginBottom: theme.spacing(4)}}\n          startIcon={<CreateCollectionIcon />}\n          color=\"secondary\" >\n            Create a new collection\n        </Button>\n      </Link> */}\n\n      {/* <Link to=\"/collections\" className={classes.linkButton}>\n          <Tooltip title='Browse existing Collections of assessments'>\n            <Button style={{color: '#fff'}}>\n              <InfoIcon />\n              Collections\n            </Button>\n          </Tooltip>\n        </Link> */}\n\n      {/* {state.evaluationRunning && \n        <CircularProgress style={{margin: theme.spacing(5, 0)}} />\n      } */}\n\n    </Container>\n  )\n}\n\n","import React from 'react';\nimport { makeStyles } from '@mui/styles';\nimport { useTheme } from '@mui/material/styles';\nimport { Container, Typography, List, ListItem, ListItemAvatar, Avatar, ListItemText  } from \"@mui/material\";\nimport EvaluationIcon from '@mui/icons-material/NetworkCheck';\nimport CollectionIcon from '@mui/icons-material/PlaylistAddCheck';\nimport AssessmentIcon from '@mui/icons-material/Biotech';\n// import AssessmentIcon from '@mui/icons-material/CheckCircle';\n\nimport {getUrlHtml} from '../settings'\n\n\nconst useStyles = makeStyles((theme: any) => ({\n  link: {\n    textDecoration: 'none',\n    color: theme.palette.primary.main,\n    '&:hover': {\n      color: theme.palette.secondary.main,\n      textDecoration: 'none',\n    },\n  },\n  paperPadding: {\n    padding: theme.spacing(2, 2),\n    margin: theme.spacing(2, 2),\n  },\n  paperTitle: {\n    fontWeight: 300,\n    marginBottom: theme.spacing(1),\n  },\n  mainText: {\n    textAlign: 'left', \n    marginBottom: '20px'\n    // margin: theme.spacing(4, 0)\n  }\n}))\n\n\nexport default function About() {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [state, setState] = React.useState({\n    open: false,\n    dialogOpen: false,\n    project_license: '',\n    language_autocomplete: [],\n  });\n  // const form_category_dropdown = React.createRef(); \n\n  return(\n    <Container className='mainContainer'>\n      <Typography variant=\"h4\" className={classes.mainText} style={{marginBottom: theme.spacing(2)}}>\n        About\n      </Typography>\n\n      <Typography variant=\"body1\" className={classes.mainText}>\n        FAIR Enough is a web service to evaluate how much online resources follow to the <a href=\"https://www.go-fair.org/fair-principles\" className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">FAIR principles ♻️</a> (Findable, Accessible, Interoperable, Reusable).\n      </Typography>\n\n      <Typography variant=\"body1\" className={classes.mainText}>\n        Developed and hosted by the <a href=\"https://www.maastrichtuniversity.nl/research/institute-data-science\" className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">Institute of Data Science</a> at Maastricht University.\n      </Typography>\n      \n\n      <Typography variant=\"h4\" className={classes.mainText} style={{margin: theme.spacing(2,0)}}>\n        How it works\n      </Typography>\n\n\n      <Typography variant=\"body1\" className={classes.mainText}>\n        An <b>evaluation</b> runs a <b>collection</b> of <b>assessments</b> against the resource to evaluate.\n      </Typography>\n\n      <List>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <EvaluationIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText>\n            <b>Evaluations</b> can be created by anyone without authentication. An evaluation takes the URI of the resource to evaluate, and a collection of assessments to run against this resource. \n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <CollectionIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText>\n            <b>Collections</b> can be created through the API after authenticating with ORCID. A collection is a sorted list of assessments\n          </ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemAvatar>\n            <Avatar>\n              <AssessmentIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText> \n            <b>Assessments</b> are tests written in Python that can be part of a collection. \n            Each assessment run some tests against the resource to evaluate, \n            record the results, and pass the results to the next assessment in the collection. \n            To create a test you will need to add a python file in the folder <a href=\"https://github.com/MaastrichtU-IDS/fair-enough/tree/main/backend/app/assessments\" className={classes.link} target=\"_blank\" rel=\"noopener noreferrer\">backend/app/assessments</a> and\n            send us a pull request\n          </ListItemText>\n        </ListItem>\n      </List>\n\n\n    </Container>\n  )\n}","import React, { createContext, useReducer } from \"react\";\nimport { View } from \"react-native\";\nimport { HashRouter } from \"react-router-dom\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n// import { ThemeProvider } from '@mui/styles';\n// import { createTheme } from '@mui/material/styles';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport blue from '@mui/material/colors/blue';\nimport './src/App.css';\nimport NavBar from \"./src/components/NavBar\";\nimport Footer from \"./src/components/Footer\";\nimport RunEvaluations from \"./src/pages/RunEvaluations\";\nimport Evaluation from \"./src/pages/Evaluation\";\nimport Collection from \"./src/pages/Collection\";\nimport CreateCollection from \"./src/pages/CreateCollection\";\nimport Collections from \"./src/pages/Collections\";\nimport Assessments from \"./src/pages/Assessments\";\nimport About from \"./src/pages/About\";\nimport UserContext from \"./src/UserContext\";\nimport { AuthProvider, useAuth } from 'oidc-react';\n\n// const UserContext = createContext(null);\n\n// https://github.com/kolitiri/fastapi-oidc-react\n// const oidcConfig = {\n//   onSignIn: async (user: any) => {\n//     alert('You just signed in, congratz! Check out the console!');\n//     console.log(user);\n//     window.location.hash = '';\n//   },\n//   authority: 'https://orcid.org',\n//   clientId: process.env.ORCID_CLIENT_ID,\n//   // redirectUri: 'http://localhost/rest/auth',\n//   redirectUri: 'http://localhost:19006/',\n//   autoSignIn: false\n//   // redirectUri=\"http://localhost:3000/oauth-callback\"\n// };\n\n// Change theme color and typography here\nconst theme = createTheme({\n  palette: {\n    primary: { light: '#63a4ff', main: blue[700], dark: '#004ba0' }, // blue\n    secondary: { light: '#4caf50', main: '#087f23', dark: '#00600f' }, // green\n    // primary: { light: blue[50], main: blue[600], dark: blue[900] },\n    // secondary: { light: '#ffcc80', main: '#ffa726', dark: '#c88719' }, // Orange\n    // secondary: { light: '#ff7043', main: '#ff5722', dark: '#087f23' }, // Orange\n    // red: { light: '#f05545', main: '#b71c1c', dark: '#7f0000' },\n    // default: { light: '#fafafa', main: '#eceff1', dark: grey[600] }\n    // success: { light: '#ffe0b2', main: '#a5d6a7', dark: '#00600f' }, // green\n    // info: { light: '#b3e5fc', main: '#81d4fa', dark: '#00600f' }, // blue\n    // warning: { light: '#c8e6c9', main: '#ffcc80', dark: '#00600f' }, // orange\n    // error: { light: '#ffcdd2', main: '#ef9a9a', dark: '#e57373' }, // red\n  },\n  typography: {\n    \"fontFamily\": \"\\\"Open Sans\\\", \\\"Roboto\\\", \\\"Arial\\\"\",\n    \"fontWeightLight\": 300,\n    \"fontWeightRegular\": 400,\n    \"fontWeightMedium\": 500,\n    \"fontSize\": 11\n  },\n  // spacing: 2\n  // overrides: {\n  //   MuiTooltip: {\n  //       tooltip: {\n  //           fontSize: \"1em\",\n  //       },\n  //   },\n  // },\n});\n\n// Fix React router:\n// https://stackoverflow.com/questions/27928372/react-router-urls-dont-work-when-refreshing-or-writing-manually\n// We could use an express server\n// app.use('/mysub-application1', express.static(path.resolve(__dirname, `../public`)))\n// app.get('/mysub-application1/*', (req,res) => { //this is required to support any client side routing written in react.\n//  res.sendFile(path.join(__dirname, '../../public', 'index.html'))\n// })\n\n\n// context for User\nfunction reducer(state: any, item: any) {\n  // return [...state, item]\n  // return {...state, item}\n  return item\n}\n\nconst App = () => {\n\n  const [user, setUser]: any = useReducer(reducer, []);\n\n  return (<ThemeProvider theme={theme}>\n    <UserContext.Provider value={{ user, setUser }}>\n    {/* <AuthProvider {...oidcConfig}> */}\n      <Router basename=\"/\">\n      {/* <HashRouter> */}\n        <View style={{height: '100%', backgroundColor: '#eceff1'}}>\n          <NavBar />\n\n          <Route exact path=\"/evaluation/:id\" component={Evaluation} />\n          <Route exact path=\"/collection/:id\" component={Collection} />\n          <Route path=\"/about\" component={About} />\n          <Route path=\"/collections\" component={Collections} />\n          <Route path=\"/assessments\" component={Assessments} />\n          <Route path=\"/collection/create\" component={CreateCollection} />\n          <Route exact path=\"/\" component={RunEvaluations} />\n          <Footer />\n        </View>\n      {/* </HashRouter> */}\n      </Router>\n    </UserContext.Provider>\n    {/* </AuthProvider> */}\n  </ThemeProvider>\n)};\nexport default App;\n","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./App.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Open+Sans);\"]);\n// Module\nexports.push([module.id, \"/* https://mui.com/guides/migration-v4/ */\\n\\n.flexGrow {\\n  flex-grow: 1; \\n}\\n\\n.mainContainer {\\n  margin-top: 30px;\\n  margin-bottom: 20px;\\n  text-align: center;\\n}\\n\\npre {\\n  border: 2px solid grey;\\n  padding: 1em;\\n  /* background: #22272e; */\\n}\\n\\ncode {\\n  font-family: monospace, monospace;\\n  border-radius: 10px;\\n  padding: 3px;\\n  /* color: white; */\\n  /* background-color: #757575; */\\n  /* background-color: #78909c; */\\n}\\n\\npre, code {\\n  font-family: monospace, monospace;\\n  border-radius: 6px;\\n  /* padding: 2px; */\\n  color: #adbac7;\\n  background: #22272e;\\n  /* padding: 0.5em; */\\n  /* padding: 5px; */\\n  /* color: white;\\n  background-color: #757575; */\\n  /* background-color: #78909c; */\\n}\\n\\na {\\n  text-decoration: none;\\n}\\n\\n/* a:hover {\\n  color: #ff7043;\\n  text-decoration: none\\n} */\\n\\n/* @import url(\\\"https://fonts.googleapis.com/icon?family=Material+Icons\\\");\\nbody {\\n  margin: 0;\\n  padding: 0;\\n  text-align: center; } */\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}